[
  {
    "url": "https://api.github.com/repos/square/okhttp/issues/6792",
    "repository_url": "https://api.github.com/repos/square/okhttp",
    "labels_url": "https://api.github.com/repos/square/okhttp/issues/6792/labels{/name}",
    "comments_url": "https://api.github.com/repos/square/okhttp/issues/6792/comments",
    "events_url": "https://api.github.com/repos/square/okhttp/issues/6792/events",
    "html_url": "https://github.com/square/okhttp/pull/6792",
    "id": 955953295,
    "node_id": "MDExOlB1bGxSZXF1ZXN0Njk5NjI3MTE3",
    "number": 6792,
    "title": "Extend Proguard Rules",
    "user": {
      "login": "yschimke",
      "id": 231923,
      "node_id": "MDQ6VXNlcjIzMTkyMw==",
      "avatar_url": "https://avatars.githubusercontent.com/u/231923?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/yschimke",
      "html_url": "https://github.com/yschimke",
      "followers_url": "https://api.github.com/users/yschimke/followers",
      "following_url": "https://api.github.com/users/yschimke/following{/other_user}",
      "gists_url": "https://api.github.com/users/yschimke/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/yschimke/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/yschimke/subscriptions",
      "organizations_url": "https://api.github.com/users/yschimke/orgs",
      "repos_url": "https://api.github.com/users/yschimke/repos",
      "events_url": "https://api.github.com/users/yschimke/events{/privacy}",
      "received_events_url": "https://api.github.com/users/yschimke/received_events",
      "type": "User",
      "site_admin": false
    },
    "labels": [
      {
        "id": 708275061,
        "node_id": "MDU6TGFiZWw3MDgyNzUwNjE=",
        "url": "https://api.github.com/repos/square/okhttp/labels/android",
        "name": "android",
        "color": "0e8a16",
        "default": false,
        "description": "Relates to usage specifically on Android"
      }
    ],
    "state": "open",
    "locked": false,
    "assignee": null,
    "assignees": [

    ],
    "milestone": null,
    "comments": 0,
    "created_at": "2021-07-29T15:20:52Z",
    "updated_at": "2021-07-29T15:21:14Z",
    "closed_at": null,
    "author_association": "COLLABORATOR",
    "active_lock_reason": null,
    "pull_request": {
      "url": "https://api.github.com/repos/square/okhttp/pulls/6792",
      "html_url": "https://github.com/square/okhttp/pull/6792",
      "diff_url": "https://github.com/square/okhttp/pull/6792.diff",
      "patch_url": "https://github.com/square/okhttp/pull/6792.patch"
    },
    "body": "TODO show cleanup of proguard warnings",
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/square/okhttp/issues/6790",
    "repository_url": "https://api.github.com/repos/square/okhttp",
    "labels_url": "https://api.github.com/repos/square/okhttp/issues/6790/labels{/name}",
    "comments_url": "https://api.github.com/repos/square/okhttp/issues/6790/comments",
    "events_url": "https://api.github.com/repos/square/okhttp/issues/6790/events",
    "html_url": "https://github.com/square/okhttp/issues/6790",
    "id": 955906017,
    "node_id": "MDU6SXNzdWU5NTU5MDYwMTc=",
    "number": 6790,
    "title": "HttpUrl#addPathSegment does not encode square brackets '[', ']",
    "user": {
      "login": "miloszivkovic",
      "id": 47811148,
      "node_id": "MDQ6VXNlcjQ3ODExMTQ4",
      "avatar_url": "https://avatars.githubusercontent.com/u/47811148?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/miloszivkovic",
      "html_url": "https://github.com/miloszivkovic",
      "followers_url": "https://api.github.com/users/miloszivkovic/followers",
      "following_url": "https://api.github.com/users/miloszivkovic/following{/other_user}",
      "gists_url": "https://api.github.com/users/miloszivkovic/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/miloszivkovic/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/miloszivkovic/subscriptions",
      "organizations_url": "https://api.github.com/users/miloszivkovic/orgs",
      "repos_url": "https://api.github.com/users/miloszivkovic/repos",
      "events_url": "https://api.github.com/users/miloszivkovic/events{/privacy}",
      "received_events_url": "https://api.github.com/users/miloszivkovic/received_events",
      "type": "User",
      "site_admin": false
    },
    "labels": [
      {
        "id": 9998865,
        "node_id": "MDU6TGFiZWw5OTk4ODY1",
        "url": "https://api.github.com/repos/square/okhttp/labels/bug",
        "name": "bug",
        "color": "d93f0b",
        "default": true,
        "description": "Bug in existing code"
      }
    ],
    "state": "open",
    "locked": false,
    "assignee": null,
    "assignees": [

    ],
    "milestone": null,
    "comments": 1,
    "created_at": "2021-07-29T14:32:00Z",
    "updated_at": "2021-07-29T15:07:40Z",
    "closed_at": null,
    "author_association": "NONE",
    "active_lock_reason": null,
    "body": "Was wondering if there are any plans on adding square brackets in list of characters that should be escaped in path segment. RFC3986 says these are allowed only in host part of the URL and I recently had web server returning 400 because \"[\" in path segment was not escaped.",
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/square/okhttp/issues/6771",
    "repository_url": "https://api.github.com/repos/square/okhttp",
    "labels_url": "https://api.github.com/repos/square/okhttp/issues/6771/labels{/name}",
    "comments_url": "https://api.github.com/repos/square/okhttp/issues/6771/comments",
    "events_url": "https://api.github.com/repos/square/okhttp/issues/6771/events",
    "html_url": "https://github.com/square/okhttp/issues/6771",
    "id": 954427419,
    "node_id": "MDU6SXNzdWU5NTQ0Mjc0MTk=",
    "number": 6771,
    "title": "java.lang.IllegalArgumentException  FRAME_SIZE_ERROR length > 0: 4",
    "user": {
      "login": "Apeplan",
      "id": 6419795,
      "node_id": "MDQ6VXNlcjY0MTk3OTU=",
      "avatar_url": "https://avatars.githubusercontent.com/u/6419795?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/Apeplan",
      "html_url": "https://github.com/Apeplan",
      "followers_url": "https://api.github.com/users/Apeplan/followers",
      "following_url": "https://api.github.com/users/Apeplan/following{/other_user}",
      "gists_url": "https://api.github.com/users/Apeplan/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/Apeplan/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/Apeplan/subscriptions",
      "organizations_url": "https://api.github.com/users/Apeplan/orgs",
      "repos_url": "https://api.github.com/users/Apeplan/repos",
      "events_url": "https://api.github.com/users/Apeplan/events{/privacy}",
      "received_events_url": "https://api.github.com/users/Apeplan/received_events",
      "type": "User",
      "site_admin": false
    },
    "labels": [
      {
        "id": 9998865,
        "node_id": "MDU6TGFiZWw5OTk4ODY1",
        "url": "https://api.github.com/repos/square/okhttp/labels/bug",
        "name": "bug",
        "color": "d93f0b",
        "default": true,
        "description": "Bug in existing code"
      },
      {
        "id": 305935479,
        "node_id": "MDU6TGFiZWwzMDU5MzU0Nzk=",
        "url": "https://api.github.com/repos/square/okhttp/labels/needs%20info",
        "name": "needs info",
        "color": "eb6420",
        "default": false,
        "description": "More information needed from reporter"
      }
    ],
    "state": "open",
    "locked": false,
    "assignee": null,
    "assignees": [

    ],
    "milestone": null,
    "comments": 1,
    "created_at": "2021-07-28T03:06:37Z",
    "updated_at": "2021-07-28T08:28:54Z",
    "closed_at": null,
    "author_association": "NONE",
    "active_lock_reason": null,
    "body": "OS：Android 9,level 28\r\nCPU：arm64-v8a\r\nokhttp：4.9.0\r\n\r\n1. okhttp3.internal.http2.Http2Writer.frameHeader(Http2Writer.kt:259)\r\n2. okhttp3.internal.http2.Http2Writer.rstStream(Http2Writer.kt:128)\r\n3. okhttp3.internal.http2.Http2Connection.writeSynReset$okhttp(Http2Connection.kt:354)\r\n4. okhttp3.internal.http2.Http2Connection$writeSynResetLater$$inlined$execute$1.runOnce(TaskQueue.kt:220)\r\n5. okhttp3.internal.concurrent.TaskRunner.runTask(TaskRunner.kt:116)\r\n6. okhttp3.internal.concurrent.TaskRunner.access$runTask(TaskRunner.kt:42)\r\n7. okhttp3.internal.concurrent.TaskRunner$runnable$1.run(TaskRunner.kt:65)\r\n8. java.util.concurrent.ThreadPoolExecutor.processTask(ThreadPoolExecutor.java:1187)\r\n9. java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1152)\r\n10. java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:641)\r\n11. java.lang.Thread.run(Thread.java:784)\r\n",
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/square/okhttp/issues/6770",
    "repository_url": "https://api.github.com/repos/square/okhttp",
    "labels_url": "https://api.github.com/repos/square/okhttp/issues/6770/labels{/name}",
    "comments_url": "https://api.github.com/repos/square/okhttp/issues/6770/comments",
    "events_url": "https://api.github.com/repos/square/okhttp/issues/6770/events",
    "html_url": "https://github.com/square/okhttp/issues/6770",
    "id": 954366853,
    "node_id": "MDU6SXNzdWU5NTQzNjY4NTM=",
    "number": 6770,
    "title": "Documentation of MockWebServer-Junit5 mentions a non-existent version",
    "user": {
      "login": "hubertgrzeskowiak",
      "id": 278624,
      "node_id": "MDQ6VXNlcjI3ODYyNA==",
      "avatar_url": "https://avatars.githubusercontent.com/u/278624?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/hubertgrzeskowiak",
      "html_url": "https://github.com/hubertgrzeskowiak",
      "followers_url": "https://api.github.com/users/hubertgrzeskowiak/followers",
      "following_url": "https://api.github.com/users/hubertgrzeskowiak/following{/other_user}",
      "gists_url": "https://api.github.com/users/hubertgrzeskowiak/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/hubertgrzeskowiak/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/hubertgrzeskowiak/subscriptions",
      "organizations_url": "https://api.github.com/users/hubertgrzeskowiak/orgs",
      "repos_url": "https://api.github.com/users/hubertgrzeskowiak/repos",
      "events_url": "https://api.github.com/users/hubertgrzeskowiak/events{/privacy}",
      "received_events_url": "https://api.github.com/users/hubertgrzeskowiak/received_events",
      "type": "User",
      "site_admin": false
    },
    "labels": [
      {
        "id": 9998865,
        "node_id": "MDU6TGFiZWw5OTk4ODY1",
        "url": "https://api.github.com/repos/square/okhttp/labels/bug",
        "name": "bug",
        "color": "d93f0b",
        "default": true,
        "description": "Bug in existing code"
      }
    ],
    "state": "open",
    "locked": false,
    "assignee": null,
    "assignees": [

    ],
    "milestone": {
      "url": "https://api.github.com/repos/square/okhttp/milestones/21",
      "html_url": "https://github.com/square/okhttp/milestone/21",
      "labels_url": "https://api.github.com/repos/square/okhttp/milestones/21/labels",
      "id": 2072710,
      "node_id": "MDk6TWlsZXN0b25lMjA3MjcxMA==",
      "number": 21,
      "title": "5.0",
      "description": "Issues that break backwards compatibility.",
      "creator": {
        "login": "swankjesse",
        "id": 133019,
        "node_id": "MDQ6VXNlcjEzMzAxOQ==",
        "avatar_url": "https://avatars.githubusercontent.com/u/133019?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/swankjesse",
        "html_url": "https://github.com/swankjesse",
        "followers_url": "https://api.github.com/users/swankjesse/followers",
        "following_url": "https://api.github.com/users/swankjesse/following{/other_user}",
        "gists_url": "https://api.github.com/users/swankjesse/gists{/gist_id}",
        "starred_url": "https://api.github.com/users/swankjesse/starred{/owner}{/repo}",
        "subscriptions_url": "https://api.github.com/users/swankjesse/subscriptions",
        "organizations_url": "https://api.github.com/users/swankjesse/orgs",
        "repos_url": "https://api.github.com/users/swankjesse/repos",
        "events_url": "https://api.github.com/users/swankjesse/events{/privacy}",
        "received_events_url": "https://api.github.com/users/swankjesse/received_events",
        "type": "User",
        "site_admin": false
      },
      "open_issues": 4,
      "closed_issues": 9,
      "state": "open",
      "created_at": "2016-10-16T16:04:12Z",
      "updated_at": "2021-07-28T08:38:22Z",
      "due_on": "2021-01-31T08:00:00Z",
      "closed_at": null
    },
    "comments": 1,
    "created_at": "2021-07-28T00:36:45Z",
    "updated_at": "2021-07-28T08:39:48Z",
    "closed_at": null,
    "author_association": "NONE",
    "active_lock_reason": null,
    "body": "https://github.com/square/okhttp/tree/master/mockwebserver-junit5 says to use this dependency:\r\n```\r\ntestRuntimeOnly(\"com.squareup.okhttp3:mockwebserver3-junit5:4.9.1\")\r\n```\r\nbut the library does not show up on https://mvnrepository.com/artifact/com.squareup.okhttp3/mockwebserver3-junit5. Maven Central only has the alpha version 5.0.0-alpha.2.\r\n\r\nRelated: https://github.com/square/okhttp/issues/6769",
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/square/okhttp/issues/6769",
    "repository_url": "https://api.github.com/repos/square/okhttp",
    "labels_url": "https://api.github.com/repos/square/okhttp/issues/6769/labels{/name}",
    "comments_url": "https://api.github.com/repos/square/okhttp/issues/6769/comments",
    "events_url": "https://api.github.com/repos/square/okhttp/issues/6769/events",
    "html_url": "https://github.com/square/okhttp/issues/6769",
    "id": 954364036,
    "node_id": "MDU6SXNzdWU5NTQzNjQwMzY=",
    "number": 6769,
    "title": "Maven Central shows MockWebServer as \"Deprecated\"",
    "user": {
      "login": "hubertgrzeskowiak",
      "id": 278624,
      "node_id": "MDQ6VXNlcjI3ODYyNA==",
      "avatar_url": "https://avatars.githubusercontent.com/u/278624?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/hubertgrzeskowiak",
      "html_url": "https://github.com/hubertgrzeskowiak",
      "followers_url": "https://api.github.com/users/hubertgrzeskowiak/followers",
      "following_url": "https://api.github.com/users/hubertgrzeskowiak/following{/other_user}",
      "gists_url": "https://api.github.com/users/hubertgrzeskowiak/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/hubertgrzeskowiak/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/hubertgrzeskowiak/subscriptions",
      "organizations_url": "https://api.github.com/users/hubertgrzeskowiak/orgs",
      "repos_url": "https://api.github.com/users/hubertgrzeskowiak/repos",
      "events_url": "https://api.github.com/users/hubertgrzeskowiak/events{/privacy}",
      "received_events_url": "https://api.github.com/users/hubertgrzeskowiak/received_events",
      "type": "User",
      "site_admin": false
    },
    "labels": [
      {
        "id": 9998865,
        "node_id": "MDU6TGFiZWw5OTk4ODY1",
        "url": "https://api.github.com/repos/square/okhttp/labels/bug",
        "name": "bug",
        "color": "d93f0b",
        "default": true,
        "description": "Bug in existing code"
      }
    ],
    "state": "open",
    "locked": false,
    "assignee": null,
    "assignees": [

    ],
    "milestone": null,
    "comments": 0,
    "created_at": "2021-07-28T00:30:00Z",
    "updated_at": "2021-07-28T00:38:20Z",
    "closed_at": null,
    "author_association": "NONE",
    "active_lock_reason": null,
    "body": "According to https://mvnrepository.com/artifact/com.squareup.okhttp3/mockwebserver/4.9.1 the package is \"Deprecated\", but according to the Readme within this repo, it's the newest version. Did somebody maybe wrongly label it as Deprecated?\r\n\r\nRelated https://github.com/square/okhttp/issues/6770",
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/square/okhttp/issues/6749",
    "repository_url": "https://api.github.com/repos/square/okhttp",
    "labels_url": "https://api.github.com/repos/square/okhttp/issues/6749/labels{/name}",
    "comments_url": "https://api.github.com/repos/square/okhttp/issues/6749/comments",
    "events_url": "https://api.github.com/repos/square/okhttp/issues/6749/events",
    "html_url": "https://github.com/square/okhttp/issues/6749",
    "id": 939853504,
    "node_id": "MDU6SXNzdWU5Mzk4NTM1MDQ=",
    "number": 6749,
    "title": "modify http2 default stream and connetion flow_control_window_size",
    "user": {
      "login": "yepeng820",
      "id": 1436018,
      "node_id": "MDQ6VXNlcjE0MzYwMTg=",
      "avatar_url": "https://avatars.githubusercontent.com/u/1436018?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/yepeng820",
      "html_url": "https://github.com/yepeng820",
      "followers_url": "https://api.github.com/users/yepeng820/followers",
      "following_url": "https://api.github.com/users/yepeng820/following{/other_user}",
      "gists_url": "https://api.github.com/users/yepeng820/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/yepeng820/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/yepeng820/subscriptions",
      "organizations_url": "https://api.github.com/users/yepeng820/orgs",
      "repos_url": "https://api.github.com/users/yepeng820/repos",
      "events_url": "https://api.github.com/users/yepeng820/events{/privacy}",
      "received_events_url": "https://api.github.com/users/yepeng820/received_events",
      "type": "User",
      "site_admin": false
    },
    "labels": [
      {
        "id": 9998867,
        "node_id": "MDU6TGFiZWw5OTk4ODY3",
        "url": "https://api.github.com/repos/square/okhttp/labels/enhancement",
        "name": "enhancement",
        "color": "84b6eb",
        "default": true,
        "description": "Feature not a bug"
      }
    ],
    "state": "open",
    "locked": false,
    "assignee": null,
    "assignees": [

    ],
    "milestone": null,
    "comments": 4,
    "created_at": "2021-07-08T13:20:35Z",
    "updated_at": "2021-07-09T12:36:40Z",
    "closed_at": null,
    "author_association": "NONE",
    "active_lock_reason": null,
    "body": "At present, okhttp connection or steam flow_control_size equals 16MB, I have encountered a timeout problem in a scene：\r\njava.net.SocketTimeoutException: timeout\r\nat okhttp3.internal.http2.Http2Stream$StreamTimeout.newTimeoutException(Http2Stream.java:678)\r\nat okhttp3.internal.http2.Http2Stream$StreamTimeout.exitAndThrowIfTimedOut(Http2Stream.java:686)\r\nat okhttp3.internal.http2.Http2Stream$FramingSource.read(Http2Stream.java:409)\r\nat okhttp3.internal.connection.Exchange$ResponseBodySource.read(Exchange.java:286)\r\nat okio.RealBufferedSource$1.read(RealBufferedSource.java:447)\r\nat java.base/java.io.InputStream.read(InputStream.java:205)\r\nat MockHttpClient$1.run(MockHttpClient.java:77)\r\nat java.base/java.lang.Thread.run(Thread.java:834)\r\nLet me take a short video as an example. If the first video is watched for 5 seconds and about 8.5M of data is downloaded (because exoplayer has a flow control, it will not continue to read, but in fact, because the stream flow control is 16M, the first video stream will continue to download by http2 connection), then the user clicks on the second video, so that the size of the video left for this user is only <7.5M, but the trigger of WINDOW_UDPATE is 16M/2=8M, because the second video has not reached This value is reached, so when the second video downloads the traffic to 7.5M, second stream cannot be triggered WINDOW_UDPATE cause timeout\r\n\r\nThere are a few issues that need to be discussed\r\n1. Since many applications have flow control policies in HTTP1.1 (exoplayer controls the video download time), but when it comes to http2.0, it actually refuses to do so, refer to 5.2.2 of RFC7540\r\n2. If the default value of OKHTTP Client is modified to connection flow_control_size = N * stream flow_control_size, it will reduce the problems of the application\r\n3. Can OKHTTP develop related APIs to modify connection and stream flow_control_size?",
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/square/okhttp/issues/6748",
    "repository_url": "https://api.github.com/repos/square/okhttp",
    "labels_url": "https://api.github.com/repos/square/okhttp/issues/6748/labels{/name}",
    "comments_url": "https://api.github.com/repos/square/okhttp/issues/6748/comments",
    "events_url": "https://api.github.com/repos/square/okhttp/issues/6748/events",
    "html_url": "https://github.com/square/okhttp/issues/6748",
    "id": 939818140,
    "node_id": "MDU6SXNzdWU5Mzk4MTgxNDA=",
    "number": 6748,
    "title": "Use Android 30 CloseGuard",
    "user": {
      "login": "yschimke",
      "id": 231923,
      "node_id": "MDQ6VXNlcjIzMTkyMw==",
      "avatar_url": "https://avatars.githubusercontent.com/u/231923?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/yschimke",
      "html_url": "https://github.com/yschimke",
      "followers_url": "https://api.github.com/users/yschimke/followers",
      "following_url": "https://api.github.com/users/yschimke/following{/other_user}",
      "gists_url": "https://api.github.com/users/yschimke/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/yschimke/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/yschimke/subscriptions",
      "organizations_url": "https://api.github.com/users/yschimke/orgs",
      "repos_url": "https://api.github.com/users/yschimke/repos",
      "events_url": "https://api.github.com/users/yschimke/events{/privacy}",
      "received_events_url": "https://api.github.com/users/yschimke/received_events",
      "type": "User",
      "site_admin": false
    },
    "labels": [
      {
        "id": 9998865,
        "node_id": "MDU6TGFiZWw5OTk4ODY1",
        "url": "https://api.github.com/repos/square/okhttp/labels/bug",
        "name": "bug",
        "color": "d93f0b",
        "default": true,
        "description": "Bug in existing code"
      }
    ],
    "state": "open",
    "locked": false,
    "assignee": null,
    "assignees": [

    ],
    "milestone": null,
    "comments": 2,
    "created_at": "2021-07-08T12:41:26Z",
    "updated_at": "2021-07-29T15:27:16Z",
    "closed_at": null,
    "author_association": "COLLABORATOR",
    "active_lock_reason": null,
    "body": "```\r\n2021-07-06 15:42:39.925 6517-6517/xxx E/STRICTMODE: android.os.strictmode.NonSdkApiUsedViolation: Ldalvik/system/CloseGuard;->get()Ldalvik/system/CloseGuard;\r\n        at android.os.StrictMode.lambda$static$1(StrictMode.java:416)\r\n        at android.os.-$$Lambda$StrictMode$lu9ekkHJ2HMz0jd3F8K8MnhenxQ.accept(Unknown Source:2)\r\n        at java.lang.Class.getDeclaredMethodInternal(Native Method)\r\n        at java.lang.Class.getPublicMethodRecursive(Class.java:2079)\r\n        at java.lang.Class.getMethod(Class.java:2066)\r\n        at java.lang.Class.getMethod(Class.java:1693)\r\n        at okhttp3.internal.platform.AndroidPlatform$CloseGuard.get(AndroidPlatform.java:379)\r\n        at okhttp3.internal.platform.AndroidPlatform.<init>(AndroidPlatform.java:58)\r\n        at okhttp3.internal.platform.Android10Platform.<init>(Android10Platform.java:32)\r\n        at okhttp3.internal.platform.Android10Platform.buildIfSupported(Android10Platform.java:82)\r\n```\r\n\r\nhttps://developer.android.com/reference/android/util/CloseGuard",
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/square/okhttp/issues/6738",
    "repository_url": "https://api.github.com/repos/square/okhttp",
    "labels_url": "https://api.github.com/repos/square/okhttp/issues/6738/labels{/name}",
    "comments_url": "https://api.github.com/repos/square/okhttp/issues/6738/comments",
    "events_url": "https://api.github.com/repos/square/okhttp/issues/6738/events",
    "html_url": "https://github.com/square/okhttp/issues/6738",
    "id": 935929433,
    "node_id": "MDU6SXNzdWU5MzU5Mjk0MzM=",
    "number": 6738,
    "title": "Exception for bad header can leak an Authorization secret",
    "user": {
      "login": "eli-darkly",
      "id": 35503443,
      "node_id": "MDQ6VXNlcjM1NTAzNDQz",
      "avatar_url": "https://avatars.githubusercontent.com/u/35503443?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/eli-darkly",
      "html_url": "https://github.com/eli-darkly",
      "followers_url": "https://api.github.com/users/eli-darkly/followers",
      "following_url": "https://api.github.com/users/eli-darkly/following{/other_user}",
      "gists_url": "https://api.github.com/users/eli-darkly/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/eli-darkly/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/eli-darkly/subscriptions",
      "organizations_url": "https://api.github.com/users/eli-darkly/orgs",
      "repos_url": "https://api.github.com/users/eli-darkly/repos",
      "events_url": "https://api.github.com/users/eli-darkly/events{/privacy}",
      "received_events_url": "https://api.github.com/users/eli-darkly/received_events",
      "type": "User",
      "site_admin": false
    },
    "labels": [
      {
        "id": 9998865,
        "node_id": "MDU6TGFiZWw5OTk4ODY1",
        "url": "https://api.github.com/repos/square/okhttp/labels/bug",
        "name": "bug",
        "color": "d93f0b",
        "default": true,
        "description": "Bug in existing code"
      }
    ],
    "state": "open",
    "locked": false,
    "assignee": null,
    "assignees": [

    ],
    "milestone": null,
    "comments": 5,
    "created_at": "2021-07-02T16:56:02Z",
    "updated_at": "2021-07-04T14:50:54Z",
    "closed_at": null,
    "author_association": "NONE",
    "active_lock_reason": null,
    "body": "If there's an illegal character in a header value, an IllegalArgumentException is thrown whose message includes the full header value. This is particularly bad if the header name is Authorization or Proxy-Authorization, which strongly suggests that the value is sensitive information.\r\n\r\nJust because it contains a non-printable character that can't possibly work in HTTP doesn't mean it doesn't _also_ contain sensitive information: consider a scenario where an application reads a credential from a configuration file or an environment variable, but fails to trim a newline that was accidentally included by whatever logic provided the value. It's the same reason why one wouldn't want to print an \"invalid password\" message that included the password in cleartext: because the invalid one might be just a slight mistyping of the valid one.\r\n\r\n```\r\njava.lang.IllegalArgumentException: Unexpected char 0x0a at 20 in Authorization value: very-secret-password\\n\r\n```\r\n\r\nThis is especially risky since it is an unchecked exception. It's common in Java for applications to have a fallback catch block to intercept any unchecked exceptions that have propagated out of lower-level code, and since those presumably represent some kind of unexpected condition that wasn't accounted for, a typical response is to log them.\r\n\r\nI would strongly suggest that these exceptions _never_ include the header value, but only the name (and maybe, as you're also doing now, what the illegal character was); that (plus the stacktrace) is likely to be enough to tell the developer where the defect is. But at the very least I would suppress the value if the header is Authorization or Proxy-Authorization. I realize you're not literally logging the value yourself, but an unchecked exception is like a flare gun— one has to assume that it might be visible to someone other than the person you're having a conversation with.\r\n\r\nTo reproduce:\r\n\r\n```java\r\npackage com.launchdarkly.eventsource;\r\n\r\nimport okhttp3.*;\r\nimport org.junit.Test;\r\nimport static org.hamcrest.MatcherAssert.*;\r\nimport static org.hamcrest.Matchers.*;\r\n\r\npublic class OkhttpHeaderExceptionTest {\r\n  @Test\r\n  public void invalidHeaderValueIsCapturedInException() throws Exception {\r\n    String password = \"very-secret-password\";\r\n    String badValue = password + \"\\n\";\r\n    \r\n    try {\r\n      Request req = new Request.Builder().url(\"http://github.com/path/doesnt/matter\")\r\n          .header(\"Authorization\", badValue)\r\n          .build();\r\n    } catch (IllegalArgumentException e) {\r\n      assertThat(e.getMessage(), not(containsString(password)));\r\n    }\r\n  }\r\n}\r\n```\r\n",
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/square/okhttp/issues/6725",
    "repository_url": "https://api.github.com/repos/square/okhttp",
    "labels_url": "https://api.github.com/repos/square/okhttp/issues/6725/labels{/name}",
    "comments_url": "https://api.github.com/repos/square/okhttp/issues/6725/comments",
    "events_url": "https://api.github.com/repos/square/okhttp/issues/6725/events",
    "html_url": "https://github.com/square/okhttp/issues/6725",
    "id": 927834340,
    "node_id": "MDU6SXNzdWU5Mjc4MzQzNDA=",
    "number": 6725,
    "title": "Thread Unsafe detection for Sink, Source, Filesystem, Response etc.",
    "user": {
      "login": "yschimke",
      "id": 231923,
      "node_id": "MDQ6VXNlcjIzMTkyMw==",
      "avatar_url": "https://avatars.githubusercontent.com/u/231923?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/yschimke",
      "html_url": "https://github.com/yschimke",
      "followers_url": "https://api.github.com/users/yschimke/followers",
      "following_url": "https://api.github.com/users/yschimke/following{/other_user}",
      "gists_url": "https://api.github.com/users/yschimke/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/yschimke/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/yschimke/subscriptions",
      "organizations_url": "https://api.github.com/users/yschimke/orgs",
      "repos_url": "https://api.github.com/users/yschimke/repos",
      "events_url": "https://api.github.com/users/yschimke/events{/privacy}",
      "received_events_url": "https://api.github.com/users/yschimke/received_events",
      "type": "User",
      "site_admin": false
    },
    "labels": [
      {
        "id": 9998867,
        "node_id": "MDU6TGFiZWw5OTk4ODY3",
        "url": "https://api.github.com/repos/square/okhttp/labels/enhancement",
        "name": "enhancement",
        "color": "84b6eb",
        "default": true,
        "description": "Feature not a bug"
      }
    ],
    "state": "open",
    "locked": false,
    "assignee": null,
    "assignees": [

    ],
    "milestone": null,
    "comments": 1,
    "created_at": "2021-06-23T04:01:02Z",
    "updated_at": "2021-06-27T17:26:17Z",
    "closed_at": null,
    "author_association": "COLLABORATOR",
    "active_lock_reason": null,
    "body": "The class of bugs like https://github.com/square/okhttp/issues/6723 are tricky to hunt down.  We should consider how to wrap key Okio or OkHttp abstractions to detect unsafe thread use.\r\n\r\nMaybe one that records and warns on switching threads, or concurrent use, or after a failure prints out the observed threads for any operation failing with a RuntimeException. ",
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/square/okhttp/issues/6724",
    "repository_url": "https://api.github.com/repos/square/okhttp",
    "labels_url": "https://api.github.com/repos/square/okhttp/issues/6724/labels{/name}",
    "comments_url": "https://api.github.com/repos/square/okhttp/issues/6724/comments",
    "events_url": "https://api.github.com/repos/square/okhttp/issues/6724/events",
    "html_url": "https://github.com/square/okhttp/issues/6724",
    "id": 927701348,
    "node_id": "MDU6SXNzdWU5Mjc3MDEzNDg=",
    "number": 6724,
    "title": "CVE-2021-0341",
    "user": {
      "login": "gs-ub",
      "id": 86328455,
      "node_id": "MDQ6VXNlcjg2MzI4NDU1",
      "avatar_url": "https://avatars.githubusercontent.com/u/86328455?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/gs-ub",
      "html_url": "https://github.com/gs-ub",
      "followers_url": "https://api.github.com/users/gs-ub/followers",
      "following_url": "https://api.github.com/users/gs-ub/following{/other_user}",
      "gists_url": "https://api.github.com/users/gs-ub/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/gs-ub/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/gs-ub/subscriptions",
      "organizations_url": "https://api.github.com/users/gs-ub/orgs",
      "repos_url": "https://api.github.com/users/gs-ub/repos",
      "events_url": "https://api.github.com/users/gs-ub/events{/privacy}",
      "received_events_url": "https://api.github.com/users/gs-ub/received_events",
      "type": "User",
      "site_admin": false
    },
    "labels": [
      {
        "id": 9998865,
        "node_id": "MDU6TGFiZWw5OTk4ODY1",
        "url": "https://api.github.com/repos/square/okhttp/labels/bug",
        "name": "bug",
        "color": "d93f0b",
        "default": true,
        "description": "Bug in existing code"
      }
    ],
    "state": "open",
    "locked": false,
    "assignee": null,
    "assignees": [

    ],
    "milestone": null,
    "comments": 5,
    "created_at": "2021-06-22T23:13:04Z",
    "updated_at": "2021-07-04T15:04:59Z",
    "closed_at": null,
    "author_association": "NONE",
    "active_lock_reason": null,
    "body": "Regarding CVE-2021-0341 - https://nvd.nist.gov/vuln/detail/CVE-2021-0341#VulnChangeHistorySection\r\n\r\nBase on NexusIQ reporting, this is a high severity issue with verifyHostName of OkHostnameVerifier.java seems to impact all current version of okhttp v3.x and v4.x.  The only okhttp version didn't have this issue in v5.0.0-alpha.2.\r\n\r\nWould there be patch release on okhttp v3x. or v4.x to have similar changes as\r\nhttps://android.googlesource.com/platform/external/okhttp/+/ddc934efe3ed06ce34f3724d41cfbdcd7e7358fc\r\n\r\n",
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/square/okhttp/issues/6723",
    "repository_url": "https://api.github.com/repos/square/okhttp",
    "labels_url": "https://api.github.com/repos/square/okhttp/issues/6723/labels{/name}",
    "comments_url": "https://api.github.com/repos/square/okhttp/issues/6723/comments",
    "events_url": "https://api.github.com/repos/square/okhttp/issues/6723/events",
    "html_url": "https://github.com/square/okhttp/issues/6723",
    "id": 926677879,
    "node_id": "MDU6SXNzdWU5MjY2Nzc4Nzk=",
    "number": 6723,
    "title": "java.lang.NullPointerException okio.Buffer.write",
    "user": {
      "login": "IvanShafran",
      "id": 5469241,
      "node_id": "MDQ6VXNlcjU0NjkyNDE=",
      "avatar_url": "https://avatars.githubusercontent.com/u/5469241?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/IvanShafran",
      "html_url": "https://github.com/IvanShafran",
      "followers_url": "https://api.github.com/users/IvanShafran/followers",
      "following_url": "https://api.github.com/users/IvanShafran/following{/other_user}",
      "gists_url": "https://api.github.com/users/IvanShafran/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/IvanShafran/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/IvanShafran/subscriptions",
      "organizations_url": "https://api.github.com/users/IvanShafran/orgs",
      "repos_url": "https://api.github.com/users/IvanShafran/repos",
      "events_url": "https://api.github.com/users/IvanShafran/events{/privacy}",
      "received_events_url": "https://api.github.com/users/IvanShafran/received_events",
      "type": "User",
      "site_admin": false
    },
    "labels": [
      {
        "id": 9998865,
        "node_id": "MDU6TGFiZWw5OTk4ODY1",
        "url": "https://api.github.com/repos/square/okhttp/labels/bug",
        "name": "bug",
        "color": "d93f0b",
        "default": true,
        "description": "Bug in existing code"
      }
    ],
    "state": "open",
    "locked": false,
    "assignee": null,
    "assignees": [

    ],
    "milestone": null,
    "comments": 2,
    "created_at": "2021-06-21T23:09:54Z",
    "updated_at": "2021-06-23T04:29:33Z",
    "closed_at": null,
    "author_association": "NONE",
    "active_lock_reason": null,
    "body": "Hello!\r\n\r\nSorry, I can't reproduce this bug, but I may provide some clues to start with.\r\n\r\nSo let's start with the usage. I'm using WebSocket from okhttp3:4.9.1 like this:\r\n\r\n```Java\r\nOkHttpClient myHttp = new OkHttpClient();\r\nRequest request = new Request.Builder().url(endpoint).build();\r\nsocket = myHttp.newWebSocket(request, new WebSocketListener() {\r\n    @Override public void onOpen(WebSocket webSocket, Response response) {\r\n        ...\r\n    }\r\n    ...\r\n});\r\n```\r\n\r\nThe socket field is guarded by the lock and set to null on close/failure. But it may pass send calls during socket opening. So as mentioned in docs, it is totally fine. Also, if the socket fails, we create a new one.\r\n\r\nSo recently, I got this rare exception that I can't reproduce:\r\n```\r\nFatal Exception: java.lang.NullPointerException\r\n       at okio.Buffer.write(Buffer.kt:1815)\r\n       at okio.RealBufferedSink.emitCompleteSegments(RealBufferedSink.kt:255)\r\n       at okio.DeflaterSink.deflate(DeflaterSink.kt:97)\r\n       at okio.DeflaterSink.write(DeflaterSink.kt:64)\r\n       at okhttp3.internal.ws.MessageDeflater.deflate(MessageDeflater.kt:45)\r\n       at okhttp3.internal.ws.WebSocketWriter.writeMessageFrame(WebSocketWriter.kt:155)\r\n       at okhttp3.internal.ws.RealWebSocket.writeOneFrame$okhttp(RealWebSocket.kt:527)\r\n       at okhttp3.internal.ws.RealWebSocket$WriterTask.runOnce(RealWebSocket.kt:620)\r\n       at okhttp3.internal.concurrent.TaskRunner.runTask(TaskRunner.kt:116)\r\n       at okhttp3.internal.concurrent.TaskRunner.access$runTask(TaskRunner.kt:42)\r\n       at okhttp3.internal.concurrent.TaskRunner$runnable$1.run(TaskRunner.kt:65)\r\n       at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1167)\r\n       at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:641)\r\n       at java.lang.Thread.run(Thread.java:923)\r\n```\r\n\r\nI checked other threads in the Crashlytics report, and the OkHttp thread bounded to my socket has this:\r\n```\r\nThread name: OkHttp \"my endpoint name\"\r\n\r\nOkHttp \"my endpoint address\"...\r\n       at java.util.zip.Deflater.deflateBytes(Deflater.java)\r\n       at java.util.zip.Deflater.deflate(Deflater.java:462)\r\n       at java.util.zip.Deflater.deflate(Deflater.java:384)\r\n       at okio.DeflaterSink.deflate(DeflaterSink.kt:91)\r\n       at okio.DeflaterSink.finishDeflate$okio(DeflaterSink.kt:117)\r\n       at okio.DeflaterSink.close(DeflaterSink.kt:128)\r\n       at okhttp3.internal.ws.MessageDeflater.close(MessageDeflater.kt:62)\r\n       at okhttp3.internal.ws.WebSocketWriter.close(WebSocketWriter.kt:199)\r\n       at okhttp3.internal.Util.closeQuietly(Util.kt:488)\r\n       at okhttp3.internal.ws.RealWebSocket.failWebSocket(RealWebSocket.kt:596)\r\n       at okhttp3.internal.ws.RealWebSocket$connect$1.onResponse(RealWebSocket.kt:197)\r\n       at okhttp3.internal.connection.RealCall$AsyncCall.run(RealCall.kt:519)\r\n       at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1167)\r\n       at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:641)\r\n       at java.lang.Thread.run(Thread.java:923)\r\n```\r\n\r\nAnother useful thread:\r\n```\r\nThread name: OkHttp \"my endpoint address\" writer\r\n\r\nOkHttp \"my endpoint address\" writer\r\n       at java.util.zip.Deflater.needsInput(Deflater.java:339)\r\n       at okio.DeflaterSink.deflate(DeflaterSink.kt:98)\r\n       at okio.DeflaterSink.write(DeflaterSink.kt:64)\r\n       at okhttp3.internal.ws.MessageDeflater.deflate(MessageDeflater.kt:45)\r\n       at okhttp3.internal.ws.WebSocketWriter.writeMessageFrame(WebSocketWriter.kt:155)\r\n       at okhttp3.internal.ws.RealWebSocket.writeOneFrame$okhttp(RealWebSocket.kt:527)\r\n       at okhttp3.internal.ws.RealWebSocket$WriterTask.runOnce(RealWebSocket.kt:620)\r\n       at okhttp3.internal.concurrent.TaskRunner.runTask(TaskRunner.kt:116)\r\n       at okhttp3.internal.concurrent.TaskRunner.access$runTask(TaskRunner.kt:42)\r\n       at okhttp3.internal.concurrent.TaskRunner$runnable$1.run(TaskRunner.kt:65)\r\n       at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1167)\r\n       at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:641)\r\n       at java.lang.Thread.run(Thread.java:923)\r\n```\r\n\r\nThe suspicious part is `failWebSocket` in the second trace. But it has paired writer thread. I'm a bit baffled by this. Probably stack trace is from the previous instance of WebSocket, and fail happened during the shutdown. I can't say. Another version is  NPE was caused by concurrency issues during failWebSocket. I see that most part of the RealWebSocket is covered with `synchronized`. Therefore it is a weak theory.\r\n\r\nI'd appreciate any help! Thank you!",
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/square/okhttp/issues/6715",
    "repository_url": "https://api.github.com/repos/square/okhttp",
    "labels_url": "https://api.github.com/repos/square/okhttp/issues/6715/labels{/name}",
    "comments_url": "https://api.github.com/repos/square/okhttp/issues/6715/comments",
    "events_url": "https://api.github.com/repos/square/okhttp/issues/6715/events",
    "html_url": "https://github.com/square/okhttp/issues/6715",
    "id": 919996301,
    "node_id": "MDU6SXNzdWU5MTk5OTYzMDE=",
    "number": 6715,
    "title": "OkHttp Graal builds fail with Kotlin 1.5.10",
    "user": {
      "login": "yschimke",
      "id": 231923,
      "node_id": "MDQ6VXNlcjIzMTkyMw==",
      "avatar_url": "https://avatars.githubusercontent.com/u/231923?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/yschimke",
      "html_url": "https://github.com/yschimke",
      "followers_url": "https://api.github.com/users/yschimke/followers",
      "following_url": "https://api.github.com/users/yschimke/following{/other_user}",
      "gists_url": "https://api.github.com/users/yschimke/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/yschimke/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/yschimke/subscriptions",
      "organizations_url": "https://api.github.com/users/yschimke/orgs",
      "repos_url": "https://api.github.com/users/yschimke/repos",
      "events_url": "https://api.github.com/users/yschimke/events{/privacy}",
      "received_events_url": "https://api.github.com/users/yschimke/received_events",
      "type": "User",
      "site_admin": false
    },
    "labels": [
      {
        "id": 9998865,
        "node_id": "MDU6TGFiZWw5OTk4ODY1",
        "url": "https://api.github.com/repos/square/okhttp/labels/bug",
        "name": "bug",
        "color": "d93f0b",
        "default": true,
        "description": "Bug in existing code"
      }
    ],
    "state": "open",
    "locked": false,
    "assignee": null,
    "assignees": [

    ],
    "milestone": null,
    "comments": 1,
    "created_at": "2021-06-14T04:54:20Z",
    "updated_at": "2021-06-14T05:03:04Z",
    "closed_at": null,
    "author_association": "COLLABORATOR",
    "active_lock_reason": null,
    "body": "https://github.com/square/okhttp/runs/2816094342?check_suite_focus=true\r\n\r\n```\r\n[ConsoleLauncher:1931]   (features):   2,117.94 ms,  2.82 GB\r\nError: Unsupported features in 5 methods\r\n[ConsoleLauncher:1931]     analysis:  97,213.36 ms,  2.82 GB\r\nDetailed message:\r\nError: unbalanced monitors: mismatch at monitorexit, 106|LoadField#this$0 != 162|LoadField#this$0\r\nCall path from entry point to okhttp3.internal.http2.Http2Connection$pushHeadersLater$$inlined$execute$default$1.runOnce(): \r\n\tat okhttp3.internal.http2.Http2Connection$pushHeadersLater$$inlined$execute$default$1.runOnce(TaskQueue.kt:98)\r\n\tat okhttp3.internal.concurrent.TaskRunner.runTask(TaskRunner.kt:116)\r\n\tat okhttp3.internal.concurrent.TaskRunner.access$runTask(TaskRunner.kt:42)\r\n\tat okhttp3.internal.concurrent.TaskRunner$runnable$1.run(TaskRunner.kt:65)\r\n\tat java.lang.Thread.run(Thread.java:829)\r\n\tat com.oracle.svm.core.thread.JavaThreads.threadStartRoutine(JavaThreads.java:553)\r\n\tat com.oracle.svm.core.posix.thread.PosixJavaThreads.pthreadStartRoutine(PosixJavaThreads.java:192)\r\n\tat com.oracle.svm.core.code.IsolateEnterStub.PosixJavaThreads_pthreadStartRoutine_e1f4a8c0039f8337338252cd8734f63a79b5e3df(generated:0)\r\nOriginal exception that caused the problem: org.graalvm.compiler.code.SourceStackTraceBailoutException$1: unbalanced monitors: mismatch at monitorexit, 106|LoadField#this$0 != 162|LoadField#this$0\r\n\tat okhttp3.internal.http2.Http2Connection$pushHeadersLater$$inlined$execute$default$1.runOnce(TaskQueue.kt:225)\r\nCaused by: org.graalvm.compiler.core.common.PermanentBailoutException: unbalanced monitors: mismatch at monitorexit, 106|LoadField#this$0 != 162|LoadField#this$0\r\n\tat jdk.internal.vm.compiler/org.graalvm.compiler.java.BytecodeParser.bailout(BytecodeParser.java:3974)\r\n\tat jdk.internal.vm.compiler/org.graalvm.compiler.java.BytecodeParser.genMonitorExit(BytecodeParser.java:2842)\r\n```\r\n",
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/square/okhttp/issues/6702",
    "repository_url": "https://api.github.com/repos/square/okhttp",
    "labels_url": "https://api.github.com/repos/square/okhttp/issues/6702/labels{/name}",
    "comments_url": "https://api.github.com/repos/square/okhttp/issues/6702/comments",
    "events_url": "https://api.github.com/repos/square/okhttp/issues/6702/events",
    "html_url": "https://github.com/square/okhttp/issues/6702",
    "id": 918868033,
    "node_id": "MDU6SXNzdWU5MTg4NjgwMzM=",
    "number": 6702,
    "title": "Support clean shutdown to allow usage under Native Image Isolates",
    "user": {
      "login": "davidfrickert",
      "id": 25358815,
      "node_id": "MDQ6VXNlcjI1MzU4ODE1",
      "avatar_url": "https://avatars.githubusercontent.com/u/25358815?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/davidfrickert",
      "html_url": "https://github.com/davidfrickert",
      "followers_url": "https://api.github.com/users/davidfrickert/followers",
      "following_url": "https://api.github.com/users/davidfrickert/following{/other_user}",
      "gists_url": "https://api.github.com/users/davidfrickert/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/davidfrickert/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/davidfrickert/subscriptions",
      "organizations_url": "https://api.github.com/users/davidfrickert/orgs",
      "repos_url": "https://api.github.com/users/davidfrickert/repos",
      "events_url": "https://api.github.com/users/davidfrickert/events{/privacy}",
      "received_events_url": "https://api.github.com/users/davidfrickert/received_events",
      "type": "User",
      "site_admin": false
    },
    "labels": [
      {
        "id": 9998867,
        "node_id": "MDU6TGFiZWw5OTk4ODY3",
        "url": "https://api.github.com/repos/square/okhttp/labels/enhancement",
        "name": "enhancement",
        "color": "84b6eb",
        "default": true,
        "description": "Feature not a bug"
      }
    ],
    "state": "open",
    "locked": false,
    "assignee": null,
    "assignees": [

    ],
    "milestone": null,
    "comments": 0,
    "created_at": "2021-06-11T15:06:19Z",
    "updated_at": "2021-06-11T15:06:19Z",
    "closed_at": null,
    "author_association": "NONE",
    "active_lock_reason": null,
    "body": "As exposed on the issue https://github.com/square/okhttp/issues/6173 comments, currently, OkHttp's daemon threads (Watchdog & TaskRunner) won't exit when getting interrupted, they stay alive until the keepalive has been exceeded, which seems to be 60s.\r\n\r\nIn traditional applications, this doesn't seem to be a problem, but in Native Image Isolates it is.\r\n\r\nOn a GraalVM Native Image Isolate situation, the expected workflow is to allow code to execute isolated, and these Isolates can be created and destroyed at will. They are essentialy, a small disjoint heap that is cheap to create and destroy quickly.\r\n\r\nThe pre-requisite to destroying them is that no Threads must be currently executing, so, the logic is that before destroying an Isolate, each thread that is currently running withing such Isolate is interrupted, and then wait until all threads have exited.\r\nIf threads don't exit, the Thread currently managing the destruction of such isolate will stay stuck until such threads exit, and of course, the isolate will continue using memory that could be freed. \r\nThis is the case of OkHttp, since the interrupt doesn't seem to do anything, the thread just waits for 60s and then when the OkHttp daemon threads exit, it proceeds to destroy the isolate.\r\n\r\nOpening this issue to ask if this can be done, and to generate some discussion about the possible solutions and their implications.\r\n\r\n**Blog post about Isolates**\r\nhttps://medium.com/graalvm/isolates-and-compressed-references-more-flexible-and-efficient-memory-management-for-graalvm-a044cc50b67e\r\n\r\n**Some documentation on the Isolate API**\r\nhttps://www.graalvm.org/reference-manual/native-image/C-API/",
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/square/okhttp/issues/6700",
    "repository_url": "https://api.github.com/repos/square/okhttp",
    "labels_url": "https://api.github.com/repos/square/okhttp/issues/6700/labels{/name}",
    "comments_url": "https://api.github.com/repos/square/okhttp/issues/6700/comments",
    "events_url": "https://api.github.com/repos/square/okhttp/issues/6700/events",
    "html_url": "https://github.com/square/okhttp/issues/6700",
    "id": 914877351,
    "node_id": "MDU6SXNzdWU5MTQ4NzczNTE=",
    "number": 6700,
    "title": "Retry HTTP/2 REFUSED_STREAM errors automatically",
    "user": {
      "login": "swankjesse",
      "id": 133019,
      "node_id": "MDQ6VXNlcjEzMzAxOQ==",
      "avatar_url": "https://avatars.githubusercontent.com/u/133019?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/swankjesse",
      "html_url": "https://github.com/swankjesse",
      "followers_url": "https://api.github.com/users/swankjesse/followers",
      "following_url": "https://api.github.com/users/swankjesse/following{/other_user}",
      "gists_url": "https://api.github.com/users/swankjesse/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/swankjesse/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/swankjesse/subscriptions",
      "organizations_url": "https://api.github.com/users/swankjesse/orgs",
      "repos_url": "https://api.github.com/users/swankjesse/repos",
      "events_url": "https://api.github.com/users/swankjesse/events{/privacy}",
      "received_events_url": "https://api.github.com/users/swankjesse/received_events",
      "type": "User",
      "site_admin": false
    },
    "labels": [
      {
        "id": 9998865,
        "node_id": "MDU6TGFiZWw5OTk4ODY1",
        "url": "https://api.github.com/repos/square/okhttp/labels/bug",
        "name": "bug",
        "color": "d93f0b",
        "default": true,
        "description": "Bug in existing code"
      }
    ],
    "state": "open",
    "locked": false,
    "assignee": null,
    "assignees": [

    ],
    "milestone": null,
    "comments": 1,
    "created_at": "2021-06-08T11:32:19Z",
    "updated_at": "2021-06-10T15:20:23Z",
    "closed_at": null,
    "author_association": "MEMBER",
    "active_lock_reason": null,
    "body": "The specs suggest it's safe to do so\r\n\r\n> * The REFUSED_STREAM error code can be included in a RST_STREAM frame to indicate that the stream is being closed prior to any processing having occurred. Any request that was sent on the reset stream can be safely retried.\r\n\r\nhttps://httpwg.org/specs/rfc7540.html#Reliability\r\n\r\nNginx can be configured to send this on old-enough connections:\r\n\r\n> Sets the maximum number of requests that can be served through one keep-alive connection. After the maximum number of requests are made, the connection is closed.\r\n>\r\n> Closing connections periodically is necessary to free per-connection memory allocations. Therefore, using too high maximum number of requests could result in excessive memory usage and not recommended. \r\n\r\nhttp://nginx.org/en/docs/http/ngx_http_core_module.html#keepalive_requests\r\n\r\nAnd our users are otherwise going to do it manually.\r\n\r\n> Is there an option (we may have missed) so OkHttp takes care of this transparently to the application?\r\n\r\nhttps://stackoverflow.com/questions/67883227/dealing-with-okhttp-http-2-refused-stream-errors\r\n\r\nWe need a limit on how many automatic retries to attempt; maybe 1. Such retries should be on a different connection.",
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/square/okhttp/issues/6696",
    "repository_url": "https://api.github.com/repos/square/okhttp",
    "labels_url": "https://api.github.com/repos/square/okhttp/issues/6696/labels{/name}",
    "comments_url": "https://api.github.com/repos/square/okhttp/issues/6696/comments",
    "events_url": "https://api.github.com/repos/square/okhttp/issues/6696/events",
    "html_url": "https://github.com/square/okhttp/issues/6696",
    "id": 910354096,
    "node_id": "MDU6SXNzdWU5MTAzNTQwOTY=",
    "number": 6696,
    "title": "Failed to ignore server certificate when the server address is an IP address",
    "user": {
      "login": "tdoan2010",
      "id": 7795705,
      "node_id": "MDQ6VXNlcjc3OTU3MDU=",
      "avatar_url": "https://avatars.githubusercontent.com/u/7795705?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/tdoan2010",
      "html_url": "https://github.com/tdoan2010",
      "followers_url": "https://api.github.com/users/tdoan2010/followers",
      "following_url": "https://api.github.com/users/tdoan2010/following{/other_user}",
      "gists_url": "https://api.github.com/users/tdoan2010/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/tdoan2010/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/tdoan2010/subscriptions",
      "organizations_url": "https://api.github.com/users/tdoan2010/orgs",
      "repos_url": "https://api.github.com/users/tdoan2010/repos",
      "events_url": "https://api.github.com/users/tdoan2010/events{/privacy}",
      "received_events_url": "https://api.github.com/users/tdoan2010/received_events",
      "type": "User",
      "site_admin": false
    },
    "labels": [
      {
        "id": 9998867,
        "node_id": "MDU6TGFiZWw5OTk4ODY3",
        "url": "https://api.github.com/repos/square/okhttp/labels/enhancement",
        "name": "enhancement",
        "color": "84b6eb",
        "default": true,
        "description": "Feature not a bug"
      }
    ],
    "state": "open",
    "locked": false,
    "assignee": null,
    "assignees": [

    ],
    "milestone": null,
    "comments": 5,
    "created_at": "2021-06-03T10:29:13Z",
    "updated_at": "2021-06-13T06:37:58Z",
    "closed_at": null,
    "author_association": "NONE",
    "active_lock_reason": null,
    "body": "I'm trying to implement mutual authentication in my Java program. Basically, my program has to make an HTTP request to another server. I need to attach a client certificate to that request and ignore the self-signed certificate of the server.\r\n\r\nIn short, I'm trying to convert this part of the `curl` command into Java:\r\n\r\n```shell\r\ncurl --insecure --key ${USERKEY} --cert ${USERCERT} ...\r\n```\r\n\r\nThis is my attempt so far to create a proper `OkHttpClient`. The idea was taken from [okhttp-tls][1].\r\n\r\n```java\r\npublic OkHttpClient getClient()\r\n        throws NoSuchAlgorithmException, IOException, InvalidKeySpecException, CertificateException {\r\n\r\n    String algorithm = \"RSA\";\r\n\r\n    // Read public and private key to create a keypair\r\n    PrivateKey privateKey = KeyUtils.getPemPrivateKey(PRIVATE_KEY_PATH, algorithm);\r\n    PublicKey publicKey = KeyUtils.getPemPublicKey(PUBLIC_KEY_PATH, algorithm);\r\n    KeyPair keyPair = new KeyPair(publicKey, privateKey);\r\n\r\n    // Read the certificate\r\n    X509Certificate certificate = KeyUtils.getX509Certificate(CERTIFICATE_PATH);\r\n\r\n    // Client certificate, used to authenticate the client\r\n    HeldCertificate clientCertificate = new HeldCertificate(keyPair, certificate);\r\n\r\n    // Create handshake certificate (which root certificate/hostname to trust)\r\n    HandshakeCertificates.Builder clientCertificatesBuilder = new HandshakeCertificates.Builder()\r\n            .addPlatformTrustedCertificates() // trust all certificate which are trusted on the platform\r\n            .heldCertificate(clientCertificate); // attach the client certificate\r\n\r\n    // Do not verify certificate of the host\r\n    clientCertificatesBuilder.addInsecureHost(HOST);\r\n    HandshakeCertificates clientCertificates = clientCertificatesBuilder.build();\r\n\r\n    return new OkHttpClient.Builder()\r\n            .sslSocketFactory(clientCertificates.sslSocketFactory(), clientCertificates.trustManager())\r\n            .hostnameVerifier((hostname, session) -> true) // Do not verify the hostname\r\n            .build();\r\n}\r\n```\r\n\r\n`KeyUtils` is just my utility class for reading key and certificate files.\r\n\r\nThe code works fine if the `HOST` is a domain name, but it's failed when `HOST` is an IP address. Below is part of the stack trace.\r\n\r\n```\r\njavax.net.ssl.SSLHandshakeException: PKIX path building failed: sun.security.provider.certpath.SunCertPathBuilderException: unable to find valid certification path to requested target\r\n\tat java.base/sun.security.ssl.Alert.createSSLException(Alert.java:131) ~[na:na]\r\n\tat java.base/sun.security.ssl.TransportContext.fatal(TransportContext.java:324) ~[na:na]\r\n\tat java.base/sun.security.ssl.TransportContext.fatal(TransportContext.java:267) ~[na:na]\r\n\tat java.base/sun.security.ssl.TransportContext.fatal(TransportContext.java:262) ~[na:na]\r\n\tat java.base/sun.security.ssl.CertificateMessage$T12CertificateConsumer.checkServerCerts(CertificateMessage.java:645) ~[na:na]\r\n\tat java.base/sun.security.ssl.CertificateMessage$T12CertificateConsumer.onCertificate(CertificateMessage.java:464) ~[na:na]\r\n\tat java.base/sun.security.ssl.CertificateMessage$T12CertificateConsumer.consume(CertificateMessage.java:360) ~[na:na]\r\n\tat java.base/sun.security.ssl.SSLHandshake.consume(SSLHandshake.java:396) ~[na:na]\r\n\tat java.base/sun.security.ssl.HandshakeContext.dispatch(HandshakeContext.java:444) ~[na:na]\r\n\tat java.base/sun.security.ssl.HandshakeContext.dispatch(HandshakeContext.java:422) ~[na:na]\r\n\tat java.base/sun.security.ssl.TransportContext.dispatch(TransportContext.java:181) ~[na:na]\r\n\tat java.base/sun.security.ssl.SSLTransport.decode(SSLTransport.java:164) ~[na:na]\r\n\tat java.base/sun.security.ssl.SSLSocketImpl.decode(SSLSocketImpl.java:1460) ~[na:na]\r\n\tat java.base/sun.security.ssl.SSLSocketImpl.readHandshakeRecord(SSLSocketImpl.java:1368) ~[na:na]\r\n\tat java.base/sun.security.ssl.SSLSocketImpl.startHandshake(SSLSocketImpl.java:437) ~[na:na]\r\n\tat okhttp3.internal.connection.RealConnection.connectTls(RealConnection.kt:367) ~[okhttp-4.7.2.jar:na]\r\n\tat okhttp3.internal.connection.RealConnection.establishProtocol(RealConnection.kt:325) ~[okhttp-4.7.2.jar:na]\r\n\tat okhttp3.internal.connection.RealConnection.connect(RealConnection.kt:197) ~[okhttp-4.7.2.jar:na]\r\n\tat okhttp3.internal.connection.ExchangeFinder.findConnection(ExchangeFinder.kt:249) ~[okhttp-4.7.2.jar:na]\r\n\tat okhttp3.internal.connection.ExchangeFinder.findHealthyConnection(ExchangeFinder.kt:108) ~[okhttp-4.7.2.jar:na]\r\n\tat okhttp3.internal.connection.ExchangeFinder.find(ExchangeFinder.kt:76) ~[okhttp-4.7.2.jar:na]\r\n\tat okhttp3.internal.connection.RealCall.initExchange$okhttp(RealCall.kt:245) ~[okhttp-4.7.2.jar:na]\r\n\tat okhttp3.internal.connection.ConnectInterceptor.intercept(ConnectInterceptor.kt:32) ~[okhttp-4.7.2.jar:na]\r\n\tat okhttp3.internal.http.RealInterceptorChain.proceed(RealInterceptorChain.kt:100) ~[okhttp-4.7.2.jar:na]\r\n\tat okhttp3.internal.cache.CacheInterceptor.intercept(CacheInterceptor.kt:96) ~[okhttp-4.7.2.jar:na]\r\n\tat okhttp3.internal.http.RealInterceptorChain.proceed(RealInterceptorChain.kt:100) ~[okhttp-4.7.2.jar:na]\r\n\tat okhttp3.internal.http.BridgeInterceptor.intercept(BridgeInterceptor.kt:83) ~[okhttp-4.7.2.jar:na]\r\n\tat okhttp3.internal.http.RealInterceptorChain.proceed(RealInterceptorChain.kt:100) ~[okhttp-4.7.2.jar:na]\r\n\tat okhttp3.internal.http.RetryAndFollowUpInterceptor.intercept(RetryAndFollowUpInterceptor.kt:76) ~[okhttp-4.7.2.jar:na]\r\n\tat okhttp3.internal.http.RealInterceptorChain.proceed(RealInterceptorChain.kt:100) ~[okhttp-4.7.2.jar:na]\r\n\tat okhttp3.internal.connection.RealCall.getResponseWithInterceptorChain$okhttp(RealCall.kt:197) ~[okhttp-4.7.2.jar:na]\r\n\tat okhttp3.internal.connection.RealCall.execute(RealCall.kt:148) ~[okhttp-4.7.2.jar:na]\r\n```\r\n\r\nHow can I make it works when the address of the server is an IP, not the domain name?\r\n\r\n\r\n  [1]: https://github.com/square/okhttp/tree/master/okhttp-tls",
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/square/okhttp/issues/6672",
    "repository_url": "https://api.github.com/repos/square/okhttp",
    "labels_url": "https://api.github.com/repos/square/okhttp/issues/6672/labels{/name}",
    "comments_url": "https://api.github.com/repos/square/okhttp/issues/6672/comments",
    "events_url": "https://api.github.com/repos/square/okhttp/issues/6672/events",
    "html_url": "https://github.com/square/okhttp/issues/6672",
    "id": 883548896,
    "node_id": "MDU6SXNzdWU4ODM1NDg4OTY=",
    "number": 6672,
    "title": "can we support crumble the h2 request cookie?",
    "user": {
      "login": "callmeli",
      "id": 10202588,
      "node_id": "MDQ6VXNlcjEwMjAyNTg4",
      "avatar_url": "https://avatars.githubusercontent.com/u/10202588?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/callmeli",
      "html_url": "https://github.com/callmeli",
      "followers_url": "https://api.github.com/users/callmeli/followers",
      "following_url": "https://api.github.com/users/callmeli/following{/other_user}",
      "gists_url": "https://api.github.com/users/callmeli/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/callmeli/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/callmeli/subscriptions",
      "organizations_url": "https://api.github.com/users/callmeli/orgs",
      "repos_url": "https://api.github.com/users/callmeli/repos",
      "events_url": "https://api.github.com/users/callmeli/events{/privacy}",
      "received_events_url": "https://api.github.com/users/callmeli/received_events",
      "type": "User",
      "site_admin": false
    },
    "labels": [
      {
        "id": 9998867,
        "node_id": "MDU6TGFiZWw5OTk4ODY3",
        "url": "https://api.github.com/repos/square/okhttp/labels/enhancement",
        "name": "enhancement",
        "color": "84b6eb",
        "default": true,
        "description": "Feature not a bug"
      }
    ],
    "state": "open",
    "locked": false,
    "assignee": null,
    "assignees": [

    ],
    "milestone": null,
    "comments": 0,
    "created_at": "2021-05-10T07:00:19Z",
    "updated_at": "2021-06-14T07:38:25Z",
    "closed_at": null,
    "author_association": "NONE",
    "active_lock_reason": null,
    "body": "just like this:\r\n[nghttp2](https://github.com/nghttp2/nghttp2/blob/20079b4c2f688385ba9ecf723f958d0448894879/src/shrpx_downstream.cc)\r\n\r\n```c\r\nvoid Downstream::crumble_request_cookie(std::vector<nghttp2_nv> &nva) {\r\n  for (auto &kv : req_.fs.headers()) {\r\n    if (kv.token != http2::HD_COOKIE) {\r\n      continue;\r\n    }\r\n\r\n    for (auto it = std::begin(kv.value); it != std::end(kv.value);) {\r\n      if (*it == '\\t' || *it == ' ' || *it == ';') {\r\n        ++it;\r\n        continue;\r\n      }\r\n\r\n      auto first = it;\r\n\r\n      it = std::find(it, std::end(kv.value), ';');\r\n\r\n      nva.push_back({(uint8_t *)\"cookie\", (uint8_t *)first, str_size(\"cookie\"),\r\n                     (size_t)(it - first),\r\n                     (uint8_t)(NGHTTP2_NV_FLAG_NO_COPY_NAME |\r\n                               NGHTTP2_NV_FLAG_NO_COPY_VALUE |\r\n                               (kv.no_index ? NGHTTP2_NV_FLAG_NO_INDEX : 0))});\r\n    }\r\n  }\r\n}\r\n```\r\n\r\n[http protocol support multiple header fields](https://datatracker.ietf.org/doc/html/rfc7230#section-3.2.2 )\r\n\r\ncookie parse code in tomcat, support multiple cookie header fields\r\n\r\n```java\r\npublic void parseCookieHeader(MimeHeaders headers, ServerCookies serverCookies) {\r\n        if (headers != null) {\r\n            for(int pos = headers.findHeader(\"Cookie\", 0); pos >= 0; pos = headers.findHeader(\"Cookie\", pos)) {\r\n                MessageBytes cookieValue = headers.getValue(pos);\r\n                if (cookieValue != null && !cookieValue.isNull()) {\r\n                    if (cookieValue.getType() != 2) {\r\n                        if (log.isDebugEnabled()) {\r\n                            Exception e = new Exception();\r\n                            log.debug(\"Cookies: Parsing cookie as String. Expected bytes.\", e);\r\n                        }\r\n\r\n                        cookieValue.toBytes();\r\n                    }\r\n\r\n                    if (log.isDebugEnabled()) {\r\n                        log.debug(\"Cookies: Parsing b[]: \" + cookieValue.toString());\r\n                    }\r\n\r\n                    ByteChunk bc = cookieValue.getByteChunk();\r\n                    Cookie.parseCookie(bc.getBytes(), bc.getOffset(), bc.getLength(), serverCookies);\r\n                }\r\n\r\n                ++pos;\r\n            }\r\n\r\n        }\r\n    }\r\n```\r\n\r\nalthough i can add  interceptor to crumble request cookies, it might be a basic support?\r\n",
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/square/okhttp/issues/6668",
    "repository_url": "https://api.github.com/repos/square/okhttp",
    "labels_url": "https://api.github.com/repos/square/okhttp/issues/6668/labels{/name}",
    "comments_url": "https://api.github.com/repos/square/okhttp/issues/6668/comments",
    "events_url": "https://api.github.com/repos/square/okhttp/issues/6668/events",
    "html_url": "https://github.com/square/okhttp/issues/6668",
    "id": 879303103,
    "node_id": "MDU6SXNzdWU4NzkzMDMxMDM=",
    "number": 6668,
    "title": "SSE: EventSources.processResponse throws kotlin.UninitializedPropertyAccessException: lateinit property call has not been initialized",
    "user": {
      "login": "jthurne",
      "id": 484822,
      "node_id": "MDQ6VXNlcjQ4NDgyMg==",
      "avatar_url": "https://avatars.githubusercontent.com/u/484822?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/jthurne",
      "html_url": "https://github.com/jthurne",
      "followers_url": "https://api.github.com/users/jthurne/followers",
      "following_url": "https://api.github.com/users/jthurne/following{/other_user}",
      "gists_url": "https://api.github.com/users/jthurne/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/jthurne/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/jthurne/subscriptions",
      "organizations_url": "https://api.github.com/users/jthurne/orgs",
      "repos_url": "https://api.github.com/users/jthurne/repos",
      "events_url": "https://api.github.com/users/jthurne/events{/privacy}",
      "received_events_url": "https://api.github.com/users/jthurne/received_events",
      "type": "User",
      "site_admin": false
    },
    "labels": [
      {
        "id": 9998865,
        "node_id": "MDU6TGFiZWw5OTk4ODY1",
        "url": "https://api.github.com/repos/square/okhttp/labels/bug",
        "name": "bug",
        "color": "d93f0b",
        "default": true,
        "description": "Bug in existing code"
      }
    ],
    "state": "open",
    "locked": false,
    "assignee": null,
    "assignees": [

    ],
    "milestone": null,
    "comments": 6,
    "created_at": "2021-05-07T16:22:27Z",
    "updated_at": "2021-05-17T13:21:54Z",
    "closed_at": null,
    "author_association": "NONE",
    "active_lock_reason": null,
    "body": "Calling EventSources.processResponse(response, listener) always results in the following exception:\r\n\r\n```\r\nkotlin.UninitializedPropertyAccessException: lateinit property call has not been initialized\r\n\tat okhttp3.sse.internal.RealEventSource.processResponse(RealEventSource.kt:65)\r\n\tat okhttp3.sse.EventSources.processResponse(EventSources.kt:42)\r\n\tat okhttp3.sse.internal.EventSourcesHttpTest.processResponse(EventSourcesHttpTest.java:69)\r\n\tat java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)\r\n\t...\r\n```\r\n\r\nThis is because the lateinit RealEventSource.call property is only initialized when `RealEventSource.connect` is called, which isn't called to process an already received response (meaning, it makes sense it isn't called with EventSources.processResponse).\r\n\r\nThe fix might be as easy as wrapping [the call to call.timeoutEarlyExit() in RealEventSource.processResponse](https://github.com/square/okhttp/blob/334eb0072512155e57a809b2fa18861c0d68ec9f/okhttp-sse/src/main/kotlin/okhttp3/sse/internal/RealEventSource.kt#L65) in an if statement that checks to see if it has been initialized or not.\r\n\r\n**Unit Test that reproduces the bug**\r\n\r\n```java\r\npackage okhttp3.sse.internal;\r\n\r\nimport mockwebserver3.MockResponse;\r\nimport mockwebserver3.MockWebServer;\r\nimport mockwebserver3.junit5.internal.MockWebServerExtension;\r\nimport okhttp3.OkHttpClient;\r\nimport okhttp3.OkHttpClientTestRule;\r\nimport okhttp3.Request;\r\nimport okhttp3.Response;\r\nimport okhttp3.sse.EventSources;\r\nimport okhttp3.testing.PlatformRule;\r\nimport org.junit.jupiter.api.AfterEach;\r\nimport org.junit.jupiter.api.BeforeEach;\r\nimport org.junit.jupiter.api.Tag;\r\nimport org.junit.jupiter.api.Test;\r\nimport org.junit.jupiter.api.extension.ExtendWith;\r\nimport org.junit.jupiter.api.extension.RegisterExtension;\r\n\r\nimport java.io.IOException;\r\n\r\n@ExtendWith(MockWebServerExtension.class)\r\n@Tag(\"Slowish\")\r\npublic final class EventSourcesHttpTest {\r\n  @RegisterExtension public final PlatformRule platform = new PlatformRule();\r\n\r\n  private MockWebServer server;\r\n  @RegisterExtension public final OkHttpClientTestRule clientTestRule = new OkHttpClientTestRule();\r\n\r\n  private final EventSourceRecorder listener = new EventSourceRecorder();\r\n  private OkHttpClient client = clientTestRule.newClient();\r\n\r\n  @BeforeEach public void before(MockWebServer server) {\r\n    this.server = server;\r\n  }\r\n\r\n  @AfterEach public void after() {\r\n    listener.assertExhausted();\r\n  }\r\n\r\n  @Test public void processResponse() throws IOException {\r\n    server.enqueue(new MockResponse().setBody(\"\"\r\n        + \"data: hey\\n\"\r\n        + \"\\n\").setHeader(\"content-type\", \"text/event-stream\"));\r\n\r\n    Request request = new Request.Builder()\r\n        .url(server.url(\"/\"))\r\n        .build();\r\n    Response response = client.newCall(request).execute();\r\n    EventSources.processResponse(response, listener);  // throws kotlin.UninitializedPropertyAccessException\r\n\r\n    listener.assertOpen();\r\n    listener.assertEvent(null, null, \"hey\");\r\n    listener.assertClose();\r\n  }\r\n}\r\n\r\n```",
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/square/okhttp/issues/6663",
    "repository_url": "https://api.github.com/repos/square/okhttp",
    "labels_url": "https://api.github.com/repos/square/okhttp/issues/6663/labels{/name}",
    "comments_url": "https://api.github.com/repos/square/okhttp/issues/6663/comments",
    "events_url": "https://api.github.com/repos/square/okhttp/issues/6663/events",
    "html_url": "https://github.com/square/okhttp/issues/6663",
    "id": 875930628,
    "node_id": "MDU6SXNzdWU4NzU5MzA2Mjg=",
    "number": 6663,
    "title": "Feature request: Configurable minimum idle connections",
    "user": {
      "login": "mxnightingale",
      "id": 403833,
      "node_id": "MDQ6VXNlcjQwMzgzMw==",
      "avatar_url": "https://avatars.githubusercontent.com/u/403833?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/mxnightingale",
      "html_url": "https://github.com/mxnightingale",
      "followers_url": "https://api.github.com/users/mxnightingale/followers",
      "following_url": "https://api.github.com/users/mxnightingale/following{/other_user}",
      "gists_url": "https://api.github.com/users/mxnightingale/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/mxnightingale/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/mxnightingale/subscriptions",
      "organizations_url": "https://api.github.com/users/mxnightingale/orgs",
      "repos_url": "https://api.github.com/users/mxnightingale/repos",
      "events_url": "https://api.github.com/users/mxnightingale/events{/privacy}",
      "received_events_url": "https://api.github.com/users/mxnightingale/received_events",
      "type": "User",
      "site_admin": false
    },
    "labels": [
      {
        "id": 9998867,
        "node_id": "MDU6TGFiZWw5OTk4ODY3",
        "url": "https://api.github.com/repos/square/okhttp/labels/enhancement",
        "name": "enhancement",
        "color": "84b6eb",
        "default": true,
        "description": "Feature not a bug"
      }
    ],
    "state": "open",
    "locked": false,
    "assignee": null,
    "assignees": [

    ],
    "milestone": null,
    "comments": 4,
    "created_at": "2021-05-04T23:52:43Z",
    "updated_at": "2021-06-18T20:57:39Z",
    "closed_at": null,
    "author_association": "NONE",
    "active_lock_reason": null,
    "body": "I have an application that connects to a few different hosts and sends very bursty traffic, often from zero to thousands of requests instantly. After periods of inactivity, my latency graph spikes up and then smooths out when burst traffic starts up again. I suspect I'm burning a bunch of time establishing connections when the load starts.",
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/square/okhttp/issues/6662",
    "repository_url": "https://api.github.com/repos/square/okhttp",
    "labels_url": "https://api.github.com/repos/square/okhttp/issues/6662/labels{/name}",
    "comments_url": "https://api.github.com/repos/square/okhttp/issues/6662/comments",
    "events_url": "https://api.github.com/repos/square/okhttp/issues/6662/events",
    "html_url": "https://github.com/square/okhttp/issues/6662",
    "id": 875324676,
    "node_id": "MDU6SXNzdWU4NzUzMjQ2NzY=",
    "number": 6662,
    "title": "Take nth RecordedRequest of MockWebServer",
    "user": {
      "login": "Tuanpm31",
      "id": 38548617,
      "node_id": "MDQ6VXNlcjM4NTQ4NjE3",
      "avatar_url": "https://avatars.githubusercontent.com/u/38548617?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/Tuanpm31",
      "html_url": "https://github.com/Tuanpm31",
      "followers_url": "https://api.github.com/users/Tuanpm31/followers",
      "following_url": "https://api.github.com/users/Tuanpm31/following{/other_user}",
      "gists_url": "https://api.github.com/users/Tuanpm31/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/Tuanpm31/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/Tuanpm31/subscriptions",
      "organizations_url": "https://api.github.com/users/Tuanpm31/orgs",
      "repos_url": "https://api.github.com/users/Tuanpm31/repos",
      "events_url": "https://api.github.com/users/Tuanpm31/events{/privacy}",
      "received_events_url": "https://api.github.com/users/Tuanpm31/received_events",
      "type": "User",
      "site_admin": false
    },
    "labels": [
      {
        "id": 9998867,
        "node_id": "MDU6TGFiZWw5OTk4ODY3",
        "url": "https://api.github.com/repos/square/okhttp/labels/enhancement",
        "name": "enhancement",
        "color": "84b6eb",
        "default": true,
        "description": "Feature not a bug"
      },
      {
        "id": 3122746631,
        "node_id": "MDU6TGFiZWwzMTIyNzQ2NjMx",
        "url": "https://api.github.com/repos/square/okhttp/labels/mockwebserver",
        "name": "mockwebserver",
        "color": "1d76db",
        "default": false,
        "description": "MockWebServer related"
      }
    ],
    "state": "open",
    "locked": false,
    "assignee": null,
    "assignees": [

    ],
    "milestone": {
      "url": "https://api.github.com/repos/square/okhttp/milestones/25",
      "html_url": "https://github.com/square/okhttp/milestone/25",
      "labels_url": "https://api.github.com/repos/square/okhttp/milestones/25/labels",
      "id": 2743829,
      "node_id": "MDk6TWlsZXN0b25lMjc0MzgyOQ==",
      "number": 25,
      "title": "Backlog",
      "description": "Triaged issues that haven’t yet been assigned a specific release.",
      "creator": {
        "login": "swankjesse",
        "id": 133019,
        "node_id": "MDQ6VXNlcjEzMzAxOQ==",
        "avatar_url": "https://avatars.githubusercontent.com/u/133019?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/swankjesse",
        "html_url": "https://github.com/swankjesse",
        "followers_url": "https://api.github.com/users/swankjesse/followers",
        "following_url": "https://api.github.com/users/swankjesse/following{/other_user}",
        "gists_url": "https://api.github.com/users/swankjesse/gists{/gist_id}",
        "starred_url": "https://api.github.com/users/swankjesse/starred{/owner}{/repo}",
        "subscriptions_url": "https://api.github.com/users/swankjesse/subscriptions",
        "organizations_url": "https://api.github.com/users/swankjesse/orgs",
        "repos_url": "https://api.github.com/users/swankjesse/repos",
        "events_url": "https://api.github.com/users/swankjesse/events{/privacy}",
        "received_events_url": "https://api.github.com/users/swankjesse/received_events",
        "type": "User",
        "site_admin": false
      },
      "open_issues": 50,
      "closed_issues": 99,
      "state": "open",
      "created_at": "2017-09-04T22:02:25Z",
      "updated_at": "2021-07-15T15:16:13Z",
      "due_on": null,
      "closed_at": null
    },
    "comments": 3,
    "created_at": "2021-05-04T10:28:46Z",
    "updated_at": "2021-07-14T01:57:09Z",
    "closed_at": null,
    "author_association": "NONE",
    "active_lock_reason": null,
    "body": "When I have multiple requests but `takeRequest` function only can take the first request of the queue, But some time, i  want to take nth of request. How i can do it?",
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/square/okhttp/issues/6651",
    "repository_url": "https://api.github.com/repos/square/okhttp",
    "labels_url": "https://api.github.com/repos/square/okhttp/issues/6651/labels{/name}",
    "comments_url": "https://api.github.com/repos/square/okhttp/issues/6651/comments",
    "events_url": "https://api.github.com/repos/square/okhttp/issues/6651/events",
    "html_url": "https://github.com/square/okhttp/issues/6651",
    "id": 867035805,
    "node_id": "MDU6SXNzdWU4NjcwMzU4MDU=",
    "number": 6651,
    "title": "Improve CI junit error reporting",
    "user": {
      "login": "yschimke",
      "id": 231923,
      "node_id": "MDQ6VXNlcjIzMTkyMw==",
      "avatar_url": "https://avatars.githubusercontent.com/u/231923?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/yschimke",
      "html_url": "https://github.com/yschimke",
      "followers_url": "https://api.github.com/users/yschimke/followers",
      "following_url": "https://api.github.com/users/yschimke/following{/other_user}",
      "gists_url": "https://api.github.com/users/yschimke/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/yschimke/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/yschimke/subscriptions",
      "organizations_url": "https://api.github.com/users/yschimke/orgs",
      "repos_url": "https://api.github.com/users/yschimke/repos",
      "events_url": "https://api.github.com/users/yschimke/events{/privacy}",
      "received_events_url": "https://api.github.com/users/yschimke/received_events",
      "type": "User",
      "site_admin": false
    },
    "labels": [
      {
        "id": 9998867,
        "node_id": "MDU6TGFiZWw5OTk4ODY3",
        "url": "https://api.github.com/repos/square/okhttp/labels/enhancement",
        "name": "enhancement",
        "color": "84b6eb",
        "default": true,
        "description": "Feature not a bug"
      }
    ],
    "state": "open",
    "locked": false,
    "assignee": null,
    "assignees": [

    ],
    "milestone": null,
    "comments": 1,
    "created_at": "2021-04-25T15:13:53Z",
    "updated_at": "2021-06-14T07:51:30Z",
    "closed_at": null,
    "author_association": "COLLABORATOR",
    "active_lock_reason": null,
    "body": "Not sure of the fix\r\n\r\nMaybe something like https://github.com/marketplace/actions/junit-report-action ?",
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/square/okhttp/issues/6648",
    "repository_url": "https://api.github.com/repos/square/okhttp",
    "labels_url": "https://api.github.com/repos/square/okhttp/issues/6648/labels{/name}",
    "comments_url": "https://api.github.com/repos/square/okhttp/issues/6648/comments",
    "events_url": "https://api.github.com/repos/square/okhttp/issues/6648/events",
    "html_url": "https://github.com/square/okhttp/issues/6648",
    "id": 866825300,
    "node_id": "MDU6SXNzdWU4NjY4MjUzMDA=",
    "number": 6648,
    "title": "Most secondary builds have 1-2 legit failures",
    "user": {
      "login": "yschimke",
      "id": 231923,
      "node_id": "MDQ6VXNlcjIzMTkyMw==",
      "avatar_url": "https://avatars.githubusercontent.com/u/231923?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/yschimke",
      "html_url": "https://github.com/yschimke",
      "followers_url": "https://api.github.com/users/yschimke/followers",
      "following_url": "https://api.github.com/users/yschimke/following{/other_user}",
      "gists_url": "https://api.github.com/users/yschimke/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/yschimke/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/yschimke/subscriptions",
      "organizations_url": "https://api.github.com/users/yschimke/orgs",
      "repos_url": "https://api.github.com/users/yschimke/repos",
      "events_url": "https://api.github.com/users/yschimke/events{/privacy}",
      "received_events_url": "https://api.github.com/users/yschimke/received_events",
      "type": "User",
      "site_admin": false
    },
    "labels": [
      {
        "id": 9998865,
        "node_id": "MDU6TGFiZWw5OTk4ODY1",
        "url": "https://api.github.com/repos/square/okhttp/labels/bug",
        "name": "bug",
        "color": "d93f0b",
        "default": true,
        "description": "Bug in existing code"
      }
    ],
    "state": "open",
    "locked": false,
    "assignee": null,
    "assignees": [

    ],
    "milestone": null,
    "comments": 4,
    "created_at": "2021-04-24T19:55:51Z",
    "updated_at": "2021-06-13T07:44:33Z",
    "closed_at": null,
    "author_association": "COLLABORATOR",
    "active_lock_reason": null,
    "body": "See https://github.com/square/okhttp/actions\r\n\r\nhttps://github.com/square/okhttp/actions/runs/781182353\r\n\r\nOpen JSSE\r\n\r\n```\r\nCallHandshakeTest > testDefaultHandshakeCipherSuiteOrderingTls13Modern() FAILED\r\n    org.opentest4j.AssertionFailedError: JDK with version 8 expected to fail with exception that ANYTHING\r\n```\r\n\r\nBouncycastle\r\n\r\n```\r\nCallHandshakeTest > testHandshakeCipherSuiteOrderingWhenReversed() FAILED\r\n    org.bouncycastle.tls.TlsFatalAlertReceived: handshake_failure(40)\r\n```\r\n\r\nConscrypt\r\n\r\n```\r\nCertificatePinnerChainValidationTest > signersMustHaveCaBitSet() FAILED\r\n    org.opentest4j.AssertionFailedError: expected connection failure but got Response{protocol=h2, code=200, message=, url=https://localhost:44305/}\r\n```\r\n\r\nWindows\r\n\r\n```\r\nDiskLruCacheTest > [2] (NioSystemFileSystem, true) FAILED\r\n    java.io.IOException: Failed to delete temp directory C:\\Users\\RUNNER~1\\AppData\\Local\\Temp\\junit6432741218474853413. The following paths could not be deleted (see suppressed exceptions for details): , journal\r\n ````\r\n\r\nGraal\r\n\r\n```\r\n   ├─ WebPlatformUrlTest ✔\r\n   │  └─ httpUrl(WebPlatformUrlTestData) ✘ Failed to find a no-argument constructor for ArgumentsProvider [okhttp3.WebPlatformUrlTest$TestDataParamProvider]. Please ensure that a no-argument constructor exists and that the class is either a top-level class or a static nested class\r\n```\r\n\r\nAndroid (29)\r\n\r\n```\r\nokhttp3.dnsoverhttps.DnsOverHttpsTest > usesCache[test(AVD) - 10] FAILED \r\n\tjava.net.UnknownHostException: google.com\r\n\tat okhttp3.dnsoverhttps.DnsOverHttps.throwBestFailure(DnsOverHttps.kt:170)\r\n```\r\n\r\nALPN\r\n\r\n```\r\nSessionReuseTest > testSessionReuse(String) > okhttp3.SessionReuseTest.testSessionReuse(String)[1] FAILED\r\n    javax.net.ssl.SSLHandshakeException: No new session is allowed and no existing session can be resumed\r\n```",
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/square/okhttp/issues/6639",
    "repository_url": "https://api.github.com/repos/square/okhttp",
    "labels_url": "https://api.github.com/repos/square/okhttp/issues/6639/labels{/name}",
    "comments_url": "https://api.github.com/repos/square/okhttp/issues/6639/comments",
    "events_url": "https://api.github.com/repos/square/okhttp/issues/6639/events",
    "html_url": "https://github.com/square/okhttp/issues/6639",
    "id": 860432355,
    "node_id": "MDU6SXNzdWU4NjA0MzIzNTU=",
    "number": 6639,
    "title": "java.lang.ExceptionInInitializerError - Occurs only for Android 11",
    "user": {
      "login": "AIRongbin1990",
      "id": 15043182,
      "node_id": "MDQ6VXNlcjE1MDQzMTgy",
      "avatar_url": "https://avatars.githubusercontent.com/u/15043182?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/AIRongbin1990",
      "html_url": "https://github.com/AIRongbin1990",
      "followers_url": "https://api.github.com/users/AIRongbin1990/followers",
      "following_url": "https://api.github.com/users/AIRongbin1990/following{/other_user}",
      "gists_url": "https://api.github.com/users/AIRongbin1990/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/AIRongbin1990/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/AIRongbin1990/subscriptions",
      "organizations_url": "https://api.github.com/users/AIRongbin1990/orgs",
      "repos_url": "https://api.github.com/users/AIRongbin1990/repos",
      "events_url": "https://api.github.com/users/AIRongbin1990/events{/privacy}",
      "received_events_url": "https://api.github.com/users/AIRongbin1990/received_events",
      "type": "User",
      "site_admin": false
    },
    "labels": [
      {
        "id": 9998865,
        "node_id": "MDU6TGFiZWw5OTk4ODY1",
        "url": "https://api.github.com/repos/square/okhttp/labels/bug",
        "name": "bug",
        "color": "d93f0b",
        "default": true,
        "description": "Bug in existing code"
      }
    ],
    "state": "open",
    "locked": false,
    "assignee": null,
    "assignees": [

    ],
    "milestone": null,
    "comments": 1,
    "created_at": "2021-04-17T15:13:32Z",
    "updated_at": "2021-05-31T03:15:20Z",
    "closed_at": null,
    "author_association": "NONE",
    "active_lock_reason": null,
    "body": "### Environment\r\n\r\n    Android Studio version: 4.1.2\r\n    defaultConfig {\r\n         minSdkVersion 21\r\n        targetSdkVersion 29\r\n    }\r\n    Android platform: Android 11\r\n    Deivce: Most Samsung models, Pixel3,4,5, OnePlus 8 Pro\r\n    detail sdk version:\r\n    api 'com.squareup.okhttp3:logging-interceptor:4.9.0'\r\n    api 'com.squareup.okhttp3:okhttp:4.9.0' \r\n\r\n    api 'com.squareup.retrofit2:retrofit:2.9.0'\r\n    api 'com.squareup.retrofit2:adapter-rxjava2:2.9.0'\r\n    api 'com.squareup.retrofit2:converter-gson:2.9.0'\r\n\r\n    api 'io.reactivex.rxjava2:rxandroid:2.1.1'\r\n    api 'io.reactivex.rxjava2:rxjava:2.2.12'\r\n\r\n    api 'com.google.firebase:firebase-messaging:21.0.0'\r\n\r\n   ### Describe\r\n   App crashes on load for Android 11.\r\n\r\n   ### Log from google play console\r\n\r\nio.reactivex.exceptions.UndeliverableException:\r\nat io.reactivex.plugins.RxJavaPlugins.onError (RxJavaPlugins.java:367)\r\nat io.reactivex.internal.schedulers.ScheduledRunnable.run (ScheduledRunnable.java:69)\r\nat io.reactivex.internal.schedulers.ScheduledRunnable.call (ScheduledRunnable.java:57)\r\nat java.util.concurrent.FutureTask.run (FutureTask.java:266)\r\nat java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.run (ScheduledThreadPoolExecutor.java:301)\r\nat java.util.concurrent.ThreadPoolExecutor.runWorker (ThreadPoolExecutor.java:1167)\r\nat java.util.concurrent.ThreadPoolExecutor$Worker.run (ThreadPoolExecutor.java:641)\r\nat java.lang.Thread.run (Thread.java:923)\r\nCaused by: java.lang.ExceptionInInitializerError:\r\nat okhttp3.internal.http2.Hpack$Writer.writeByteString (Hpack.java:568)\r\nat okhttp3.internal.http2.Hpack$Writer.writeHeaders (Hpack.java:532)\r\nat okhttp3.internal.http2.Http2Writer.goAway (Http2Writer.java:296)\r\nat okhttp3.internal.http2.Http2Writer.frameHeader (Http2Writer.java:296)\r\nat okhttp3.internal.http2.Http2Writer.headers (Http2Writer.java:296)\r\nat okhttp3.internal.http2.Http2Connection.newStream (Http2Connection.java:259)\r\nat okhttp3.internal.http2.Http2Connection.newStream (Http2Connection.java:225)\r\nat okhttp3.internal.http2.Http2ExchangeCodec.writeRequestHeaders (Http2ExchangeCodec.java:76)\r\nat okhttp3.internal.connection.Exchange.writeRequestHeaders (Exchange.java:59)\r\nat okhttp3.internal.http.CallServerInterceptor.intercept (CallServerInterceptor.java:36)\r\nat okhttp3.internal.http.RealInterceptorChain.proceed (RealInterceptorChain.java:109)\r\nat okhttp3.internal.connection.ConnectInterceptor.intercept (ConnectInterceptor.java:34)\r\nat okhttp3.internal.http.RealInterceptorChain.proceed (RealInterceptorChain.java:109)\r\nat okhttp3.internal.cache.CacheInterceptor.intercept (CacheInterceptor.java:95)\r\nat okhttp3.internal.http.RealInterceptorChain.proceed (RealInterceptorChain.java:109)\r\nat okhttp3.internal.http.BridgeInterceptor.intercept (BridgeInterceptor.java:83)\r\nat okhttp3.internal.http.RealInterceptorChain.proceed (RealInterceptorChain.java:109)\r\nat okhttp3.internal.http.RetryAndFollowUpInterceptor.intercept (RetryAndFollowUpInterceptor.java:76)\r\nat okhttp3.internal.http.RealInterceptorChain.proceed (RealInterceptorChain.java:109)\r\nat okhttp3.internal.connection.RealCall.k (RealCall.java:201)\r\nat okhttp3.internal.connection.RealCall.execute (RealCall.java:154)\r\nat retrofit2.OkHttpCall.execute (OkHttpCall.java:204)\r\nat retrofit2.adapter.rxjava2.CallExecuteObservable.subscribeActual (CallExecuteObservable.java:46)\r\nat io.reactivex.Observable.subscribe (Observable.java:12267)\r\nat io.reactivex.internal.operators.flowable.FlowableFromObservable.subscribeActual (FlowableFromObservable.java:29)\r\nat io.reactivex.Flowable.subscribe (Flowable.java:14918)\r\nat io.reactivex.internal.operators.flowable.FlowableOnBackpressureLatest.subscribeActual (FlowableOnBackpressureLatest.java:32)\r\nat io.reactivex.Flowable.subscribe (Flowable.java:14918)\r\nat io.reactivex.Flowable.subscribe (Flowable.java:14865)\r\nat io.reactivex.internal.operators.flowable.FlowableSubscribeOn$SubscribeOnSubscriber.run (FlowableSubscribeOn.java:82)\r\nat io.reactivex.internal.schedulers.ScheduledRunnable.run (ScheduledRunnable.java:66)\r\nat io.reactivex.internal.schedulers.ScheduledRunnable.call (ScheduledRunnable.java:57)\r\nat java.util.concurrent.FutureTask.run (FutureTask.java:266)\r\nat java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.run (ScheduledThreadPoolExecutor.java:301)\r\nat java.util.concurrent.ThreadPoolExecutor.runWorker (ThreadPoolExecutor.java:1167)\r\nat java.util.concurrent.ThreadPoolExecutor$Worker.run (ThreadPoolExecutor.java:641)\r\nat java.lang.Thread.run (Thread.java:923)\r\nCaused by: java.lang.NullPointerException:\r\nat okhttp3.internal.http2.Huffman.addCode (Huffman.java:166)\r\nat okhttp3.internal.http2.Huffman. (Huffman.java:82)\r\nat okhttp3.internal.http2.Hpack$Writer.writeByteString (Hpack.java:568)\r\nat okhttp3.internal.http2.Hpack$Writer.writeHeaders (Hpack.java:532)\r\nat okhttp3.internal.http2.Http2Writer.goAway (Http2Writer.java:296)\r\nat okhttp3.internal.http2.Http2Writer.frameHeader (Http2Writer.java:296)\r\nat okhttp3.internal.http2.Http2Writer.headers (Http2Writer.java:296)\r\nat okhttp3.internal.http2.Http2Connection.newStream (Http2Connection.java:259)\r\nat okhttp3.internal.http2.Http2Connection.newStream (Http2Connection.java:225)\r\nat okhttp3.internal.http2.Http2ExchangeCodec.writeRequestHeaders (Http2ExchangeCodec.java:76)\r\nat okhttp3.internal.connection.Exchange.writeRequestHeaders (Exchange.java:59)\r\nat okhttp3.internal.http.CallServerInterceptor.intercept (CallServerInterceptor.java:36)\r\nat okhttp3.internal.http.RealInterceptorChain.proceed (RealInterceptorChain.java:109)\r\nat okhttp3.internal.connection.ConnectInterceptor.intercept (ConnectInterceptor.java:34)\r\nat okhttp3.internal.http.RealInterceptorChain.proceed (RealInterceptorChain.java:109)\r\nat okhttp3.internal.cache.CacheInterceptor.intercept (CacheInterceptor.java:95)\r\nat okhttp3.internal.http.RealInterceptorChain.proceed (RealInterceptorChain.java:109)\r\nat okhttp3.internal.http.BridgeInterceptor.intercept (BridgeInterceptor.java:83)\r\nat okhttp3.internal.http.RealInterceptorChain.proceed (RealInterceptorChain.java:109)\r\nat okhttp3.internal.http.RetryAndFollowUpInterceptor.intercept (RetryAndFollowUpInterceptor.java:76)\r\nat okhttp3.internal.http.RealInterceptorChain.proceed (RealInterceptorChain.java:109)\r\nat okhttp3.internal.connection.RealCall.k (RealCall.java:201)\r\nat okhttp3.internal.connection.RealCall.execute (RealCall.java:154)\r\nat retrofit2.OkHttpCall.execute (OkHttpCall.java:204)\r\nat retrofit2.adapter.rxjava2.CallExecuteObservable.subscribeActual (CallExecuteObservable.java:46)\r\nat io.reactivex.Observable.subscribe (Observable.java:12267)\r\nat io.reactivex.internal.operators.flowable.FlowableFromObservable.subscribeActual (FlowableFromObservable.java:29)\r\nat io.reactivex.Flowable.subscribe (Flowable.java:14918)\r\nat io.reactivex.internal.operators.flowable.FlowableOnBackpressureLatest.subscribeActual (FlowableOnBackpressureLatest.java:32)\r\nat io.reactivex.Flowable.subscribe (Flowable.java:14918)\r\nat io.reactivex.Flowable.subscribe (Flowable.java:14865)\r\nat io.reactivex.internal.operators.flowable.FlowableSubscribeOn$SubscribeOnSubscriber.run (FlowableSubscribeOn.java:82)\r\nat io.reactivex.internal.schedulers.ScheduledRunnable.run (ScheduledRunnable.java:66)\r\nat io.reactivex.internal.schedulers.ScheduledRunnable.call (ScheduledRunnable.java:57)\r\nat java.util.concurrent.FutureTask.run (FutureTask.java:266)\r\nat java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.run (ScheduledThreadPoolExecutor.java:301)\r\nat java.util.concurrent.ThreadPoolExecutor.runWorker (ThreadPoolExecutor.java:1167)\r\nat java.util.concurrent.ThreadPoolExecutor$Worker.run (ThreadPoolExecutor.java:641)\r\nat java.lang.Thread.run (Thread.java:923)\r\n\r\nPlease help me clean this issue. thanks\r\n\r\n",
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/square/okhttp/issues/6629",
    "repository_url": "https://api.github.com/repos/square/okhttp",
    "labels_url": "https://api.github.com/repos/square/okhttp/issues/6629/labels{/name}",
    "comments_url": "https://api.github.com/repos/square/okhttp/issues/6629/comments",
    "events_url": "https://api.github.com/repos/square/okhttp/issues/6629/events",
    "html_url": "https://github.com/square/okhttp/issues/6629",
    "id": 857622835,
    "node_id": "MDU6SXNzdWU4NTc2MjI4MzU=",
    "number": 6629,
    "title": "Update docs to show intermediates with client auth example",
    "user": {
      "login": "yschimke",
      "id": 231923,
      "node_id": "MDQ6VXNlcjIzMTkyMw==",
      "avatar_url": "https://avatars.githubusercontent.com/u/231923?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/yschimke",
      "html_url": "https://github.com/yschimke",
      "followers_url": "https://api.github.com/users/yschimke/followers",
      "following_url": "https://api.github.com/users/yschimke/following{/other_user}",
      "gists_url": "https://api.github.com/users/yschimke/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/yschimke/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/yschimke/subscriptions",
      "organizations_url": "https://api.github.com/users/yschimke/orgs",
      "repos_url": "https://api.github.com/users/yschimke/repos",
      "events_url": "https://api.github.com/users/yschimke/events{/privacy}",
      "received_events_url": "https://api.github.com/users/yschimke/received_events",
      "type": "User",
      "site_admin": false
    },
    "labels": [
      {
        "id": 9998867,
        "node_id": "MDU6TGFiZWw5OTk4ODY3",
        "url": "https://api.github.com/repos/square/okhttp/labels/enhancement",
        "name": "enhancement",
        "color": "84b6eb",
        "default": true,
        "description": "Feature not a bug"
      }
    ],
    "state": "open",
    "locked": false,
    "assignee": null,
    "assignees": [

    ],
    "milestone": null,
    "comments": 0,
    "created_at": "2021-04-14T07:48:37Z",
    "updated_at": "2021-04-14T07:48:37Z",
    "closed_at": null,
    "author_association": "COLLABORATOR",
    "active_lock_reason": null,
    "body": "In https://github.com/square/okhttp/blob/ef5d0c83f7bbd3a0c0534e7ca23cbc4ee7550f3b/okhttp-tls/README.md\r\n\r\nRelates to https://stackoverflow.com/questions/67064309/bad-certificate-error-when-using-client-certificate-with-retrofit-okhhtp-but-w/67087544#67087544",
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/square/okhttp/issues/6620",
    "repository_url": "https://api.github.com/repos/square/okhttp",
    "labels_url": "https://api.github.com/repos/square/okhttp/issues/6620/labels{/name}",
    "comments_url": "https://api.github.com/repos/square/okhttp/issues/6620/comments",
    "events_url": "https://api.github.com/repos/square/okhttp/issues/6620/events",
    "html_url": "https://github.com/square/okhttp/issues/6620",
    "id": 851819817,
    "node_id": "MDU6SXNzdWU4NTE4MTk4MTc=",
    "number": 6620,
    "title": "Want \"mockWebServer.dispatcher.clear()\"",
    "user": {
      "login": "lathspell",
      "id": 603223,
      "node_id": "MDQ6VXNlcjYwMzIyMw==",
      "avatar_url": "https://avatars.githubusercontent.com/u/603223?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/lathspell",
      "html_url": "https://github.com/lathspell",
      "followers_url": "https://api.github.com/users/lathspell/followers",
      "following_url": "https://api.github.com/users/lathspell/following{/other_user}",
      "gists_url": "https://api.github.com/users/lathspell/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/lathspell/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/lathspell/subscriptions",
      "organizations_url": "https://api.github.com/users/lathspell/orgs",
      "repos_url": "https://api.github.com/users/lathspell/repos",
      "events_url": "https://api.github.com/users/lathspell/events{/privacy}",
      "received_events_url": "https://api.github.com/users/lathspell/received_events",
      "type": "User",
      "site_admin": false
    },
    "labels": [
      {
        "id": 9998867,
        "node_id": "MDU6TGFiZWw5OTk4ODY3",
        "url": "https://api.github.com/repos/square/okhttp/labels/enhancement",
        "name": "enhancement",
        "color": "84b6eb",
        "default": true,
        "description": "Feature not a bug"
      },
      {
        "id": 3122746631,
        "node_id": "MDU6TGFiZWwzMTIyNzQ2NjMx",
        "url": "https://api.github.com/repos/square/okhttp/labels/mockwebserver",
        "name": "mockwebserver",
        "color": "1d76db",
        "default": false,
        "description": "MockWebServer related"
      }
    ],
    "state": "open",
    "locked": false,
    "assignee": null,
    "assignees": [

    ],
    "milestone": null,
    "comments": 5,
    "created_at": "2021-04-06T21:21:34Z",
    "updated_at": "2021-07-01T07:58:46Z",
    "closed_at": null,
    "author_association": "CONTRIBUTOR",
    "active_lock_reason": null,
    "body": "I have a JUnit file with several test functions that share a MockWebServer instance. The reason that they share it is that I need to declare it statically so that I can use Spring's `@DynamicPropertySource` to inject the MockWebServer's port number as Spring environment variable.\r\nAnyway, Sometimes I enqueue a response and then test function A fails and does not take the response off the queue as expected. Then the next test function B is executed, I enqueue another response but the next call to the mock retrieves the first response in the queue - that was intended for the test function A.\r\n\r\nWhat I propose is a `mockWebServer.dispatcher.clear()` method that empties the response queue. I could call this in a `@BeforeEach` annotated JUnit method. ",
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/square/okhttp/issues/6611",
    "repository_url": "https://api.github.com/repos/square/okhttp",
    "labels_url": "https://api.github.com/repos/square/okhttp/issues/6611/labels{/name}",
    "comments_url": "https://api.github.com/repos/square/okhttp/issues/6611/comments",
    "events_url": "https://api.github.com/repos/square/okhttp/issues/6611/events",
    "html_url": "https://github.com/square/okhttp/issues/6611",
    "id": 844813822,
    "node_id": "MDU6SXNzdWU4NDQ4MTM4MjI=",
    "number": 6611,
    "title": "Connect Timeout - Thread.Interrupt() doesn't cancel call.execute() when we're stuck at the connection state",
    "user": {
      "login": "om3g4zell",
      "id": 16681470,
      "node_id": "MDQ6VXNlcjE2NjgxNDcw",
      "avatar_url": "https://avatars.githubusercontent.com/u/16681470?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/om3g4zell",
      "html_url": "https://github.com/om3g4zell",
      "followers_url": "https://api.github.com/users/om3g4zell/followers",
      "following_url": "https://api.github.com/users/om3g4zell/following{/other_user}",
      "gists_url": "https://api.github.com/users/om3g4zell/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/om3g4zell/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/om3g4zell/subscriptions",
      "organizations_url": "https://api.github.com/users/om3g4zell/orgs",
      "repos_url": "https://api.github.com/users/om3g4zell/repos",
      "events_url": "https://api.github.com/users/om3g4zell/events{/privacy}",
      "received_events_url": "https://api.github.com/users/om3g4zell/received_events",
      "type": "User",
      "site_admin": false
    },
    "labels": [
      {
        "id": 9998865,
        "node_id": "MDU6TGFiZWw5OTk4ODY1",
        "url": "https://api.github.com/repos/square/okhttp/labels/bug",
        "name": "bug",
        "color": "d93f0b",
        "default": true,
        "description": "Bug in existing code"
      }
    ],
    "state": "open",
    "locked": false,
    "assignee": null,
    "assignees": [

    ],
    "milestone": {
      "url": "https://api.github.com/repos/square/okhttp/milestones/25",
      "html_url": "https://github.com/square/okhttp/milestone/25",
      "labels_url": "https://api.github.com/repos/square/okhttp/milestones/25/labels",
      "id": 2743829,
      "node_id": "MDk6TWlsZXN0b25lMjc0MzgyOQ==",
      "number": 25,
      "title": "Backlog",
      "description": "Triaged issues that haven’t yet been assigned a specific release.",
      "creator": {
        "login": "swankjesse",
        "id": 133019,
        "node_id": "MDQ6VXNlcjEzMzAxOQ==",
        "avatar_url": "https://avatars.githubusercontent.com/u/133019?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/swankjesse",
        "html_url": "https://github.com/swankjesse",
        "followers_url": "https://api.github.com/users/swankjesse/followers",
        "following_url": "https://api.github.com/users/swankjesse/following{/other_user}",
        "gists_url": "https://api.github.com/users/swankjesse/gists{/gist_id}",
        "starred_url": "https://api.github.com/users/swankjesse/starred{/owner}{/repo}",
        "subscriptions_url": "https://api.github.com/users/swankjesse/subscriptions",
        "organizations_url": "https://api.github.com/users/swankjesse/orgs",
        "repos_url": "https://api.github.com/users/swankjesse/repos",
        "events_url": "https://api.github.com/users/swankjesse/events{/privacy}",
        "received_events_url": "https://api.github.com/users/swankjesse/received_events",
        "type": "User",
        "site_admin": false
      },
      "open_issues": 50,
      "closed_issues": 99,
      "state": "open",
      "created_at": "2017-09-04T22:02:25Z",
      "updated_at": "2021-07-15T15:16:13Z",
      "due_on": null,
      "closed_at": null
    },
    "comments": 1,
    "created_at": "2021-03-30T16:13:58Z",
    "updated_at": "2021-04-02T07:31:40Z",
    "closed_at": null,
    "author_association": "NONE",
    "active_lock_reason": null,
    "body": "## Describe the bug\r\n\r\nWhen the server is unreachable and isn't able to answer to the connect request. Using\r\n`Thread.interrupt()` doesn't cancel the call and only unblock after the `connectTimeout`\r\n property has passed.\r\n## Expected behaviour\r\n\r\nI Exptect `Thread.interrupt()` to have the same behaviour as `call.cancel()` -> Cancel the call even when stuck at the connecting state.\r\n\r\n## Client information\r\n\r\nOS : Unix\r\nOKHttp Version : 4.9.0\r\nJDK : AdoptOpenJDK 11\r\n\r\n## Step to reproduce\r\n\r\nMake a call that would result in a `connectTimeout` and try to interrupt it with `Thread.interrupt()`\r\n\r\nHere is a java test (using assertJ)\r\n\r\n```java\r\n    @Test\r\n    void interupt_on_connect( ) throws InterruptedException {\r\n\r\n        var connectTimeout = Duration.ofMillis( 500 );\r\n        var client = new OkHttpClient.Builder( )\r\n                .connectTimeout( connectTimeout )\r\n                .build( );\r\n\r\n        var call = client.newCall( new Request.Builder( )\r\n                .url( new HttpUrl.Builder( )\r\n                        .scheme( \"http\" )\r\n                        // Host that don't listen packets nor reject them\r\n                        .host( \"10.255.255.1\" )\r\n                        .build( ) )\r\n                .get( )\r\n                .build( ) );\r\n\r\n        var thread = new Thread( ( ) -> {\r\n            try (var resp = call.execute( )) {\r\n                fail( \"Shouldn't succeed\" );\r\n            } catch (IOException e) {\r\n                // NO-OP\r\n            }\r\n        } );\r\n        thread.start( );\r\n        // Test will fail using Thread.interrupt\r\n        thread.interrupt( );\r\n\r\n        // Test will succeed using call.cancel()\r\n        //call.cancel();\r\n        thread.join( connectTimeout.toMillis( ) );\r\n        assertThat(thread.isAlive( ) ).isFalse();\r\n    }\r\n\r\n```\r\n\r\nThe test is passing using `call.cancel()` and failing using `Thread.interrupt()`\r\n\r\nHere is a unit test that can be placed in **CancelTest.kt**\r\n\r\n```java\r\n  @ParameterizedTest\r\n  @ArgumentsSource(CancelModelParamProvider::class)\r\n  fun cancelConnecting(mode: Pair<CancelMode, ConnectionType>) {\r\n    val connectTimeout = Duration.ofMillis(500);\r\n\r\n    setUp(mode)\r\n    val client = client.newBuilder()\r\n      .connectTimeout(connectTimeout)\r\n      .build()\r\n    val call = client.newCall(\r\n      Request.Builder()\r\n        .url(HttpUrl.Builder()\r\n          .scheme(connectionType.name)\r\n          // // Host that don't listen packets nor reject them\r\n          .host(\"10.255.255.1\")\r\n          .build())\r\n        .get()\r\n        .build()\r\n    )\r\n    cancelLater(call, 100)\r\n    try {\r\n      call.execute()\r\n      fail(\"\")\r\n    } catch (expected: IOException) {\r\n      expected.printStackTrace()\r\n      assertEquals(cancelMode == INTERRUPT, Thread.interrupted())\r\n\r\n      // If connect timeout exception happens it means that the call hasn't been canceled\r\n      assertThat(expected).isNotInstanceOf(SocketTimeoutException::class.java)\r\n    }\r\n  }\r\n```\r\n\r\nTest using the `H2` ConnectionType will fail as it's **not** a valid shcheme.\r\n\r\nTests using `call.cancel()` will succeed.\r\nTests using `Thread.interrupt()` will fail after the connectTimeout delay.\r\nThe Thrown exception is \r\n```java\r\njava.net.SocketTimeoutException: connect timed out\r\n```\r\n\r\ninstead of \r\n```java\r\njava.net.SocketException: Socket closed\r\n```\r\nwith the `call.cancel()` method",
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/square/okhttp/issues/6587",
    "repository_url": "https://api.github.com/repos/square/okhttp",
    "labels_url": "https://api.github.com/repos/square/okhttp/issues/6587/labels{/name}",
    "comments_url": "https://api.github.com/repos/square/okhttp/issues/6587/comments",
    "events_url": "https://api.github.com/repos/square/okhttp/issues/6587/events",
    "html_url": "https://github.com/square/okhttp/issues/6587",
    "id": 831105557,
    "node_id": "MDU6SXNzdWU4MzExMDU1NTc=",
    "number": 6587,
    "title": "Structured Field Values for HTTP",
    "user": {
      "login": "yschimke",
      "id": 231923,
      "node_id": "MDQ6VXNlcjIzMTkyMw==",
      "avatar_url": "https://avatars.githubusercontent.com/u/231923?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/yschimke",
      "html_url": "https://github.com/yschimke",
      "followers_url": "https://api.github.com/users/yschimke/followers",
      "following_url": "https://api.github.com/users/yschimke/following{/other_user}",
      "gists_url": "https://api.github.com/users/yschimke/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/yschimke/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/yschimke/subscriptions",
      "organizations_url": "https://api.github.com/users/yschimke/orgs",
      "repos_url": "https://api.github.com/users/yschimke/repos",
      "events_url": "https://api.github.com/users/yschimke/events{/privacy}",
      "received_events_url": "https://api.github.com/users/yschimke/received_events",
      "type": "User",
      "site_admin": false
    },
    "labels": [
      {
        "id": 9998867,
        "node_id": "MDU6TGFiZWw5OTk4ODY3",
        "url": "https://api.github.com/repos/square/okhttp/labels/enhancement",
        "name": "enhancement",
        "color": "84b6eb",
        "default": true,
        "description": "Feature not a bug"
      }
    ],
    "state": "open",
    "locked": false,
    "assignee": null,
    "assignees": [

    ],
    "milestone": {
      "url": "https://api.github.com/repos/square/okhttp/milestones/25",
      "html_url": "https://github.com/square/okhttp/milestone/25",
      "labels_url": "https://api.github.com/repos/square/okhttp/milestones/25/labels",
      "id": 2743829,
      "node_id": "MDk6TWlsZXN0b25lMjc0MzgyOQ==",
      "number": 25,
      "title": "Backlog",
      "description": "Triaged issues that haven’t yet been assigned a specific release.",
      "creator": {
        "login": "swankjesse",
        "id": 133019,
        "node_id": "MDQ6VXNlcjEzMzAxOQ==",
        "avatar_url": "https://avatars.githubusercontent.com/u/133019?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/swankjesse",
        "html_url": "https://github.com/swankjesse",
        "followers_url": "https://api.github.com/users/swankjesse/followers",
        "following_url": "https://api.github.com/users/swankjesse/following{/other_user}",
        "gists_url": "https://api.github.com/users/swankjesse/gists{/gist_id}",
        "starred_url": "https://api.github.com/users/swankjesse/starred{/owner}{/repo}",
        "subscriptions_url": "https://api.github.com/users/swankjesse/subscriptions",
        "organizations_url": "https://api.github.com/users/swankjesse/orgs",
        "repos_url": "https://api.github.com/users/swankjesse/repos",
        "events_url": "https://api.github.com/users/swankjesse/events{/privacy}",
        "received_events_url": "https://api.github.com/users/swankjesse/received_events",
        "type": "User",
        "site_admin": false
      },
      "open_issues": 50,
      "closed_issues": 99,
      "state": "open",
      "created_at": "2017-09-04T22:02:25Z",
      "updated_at": "2021-07-15T15:16:13Z",
      "due_on": null,
      "closed_at": null
    },
    "comments": 0,
    "created_at": "2021-03-14T08:55:01Z",
    "updated_at": "2021-03-14T08:55:01Z",
    "closed_at": null,
    "author_association": "COLLABORATOR",
    "active_lock_reason": null,
    "body": "One to watch - https://www.rfc-editor.org/info/rfc8941?s=03\r\n\r\nNo urgent demand here, but can help us be opinionated on sending correct requests.",
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/square/okhttp/issues/6575",
    "repository_url": "https://api.github.com/repos/square/okhttp",
    "labels_url": "https://api.github.com/repos/square/okhttp/issues/6575/labels{/name}",
    "comments_url": "https://api.github.com/repos/square/okhttp/issues/6575/comments",
    "events_url": "https://api.github.com/repos/square/okhttp/issues/6575/events",
    "html_url": "https://github.com/square/okhttp/issues/6575",
    "id": 821816529,
    "node_id": "MDU6SXNzdWU4MjE4MTY1Mjk=",
    "number": 6575,
    "title": "Should we use explicit API mode",
    "user": {
      "login": "yschimke",
      "id": 231923,
      "node_id": "MDQ6VXNlcjIzMTkyMw==",
      "avatar_url": "https://avatars.githubusercontent.com/u/231923?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/yschimke",
      "html_url": "https://github.com/yschimke",
      "followers_url": "https://api.github.com/users/yschimke/followers",
      "following_url": "https://api.github.com/users/yschimke/following{/other_user}",
      "gists_url": "https://api.github.com/users/yschimke/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/yschimke/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/yschimke/subscriptions",
      "organizations_url": "https://api.github.com/users/yschimke/orgs",
      "repos_url": "https://api.github.com/users/yschimke/repos",
      "events_url": "https://api.github.com/users/yschimke/events{/privacy}",
      "received_events_url": "https://api.github.com/users/yschimke/received_events",
      "type": "User",
      "site_admin": false
    },
    "labels": [
      {
        "id": 9998867,
        "node_id": "MDU6TGFiZWw5OTk4ODY3",
        "url": "https://api.github.com/repos/square/okhttp/labels/enhancement",
        "name": "enhancement",
        "color": "84b6eb",
        "default": true,
        "description": "Feature not a bug"
      }
    ],
    "state": "open",
    "locked": false,
    "assignee": null,
    "assignees": [

    ],
    "milestone": {
      "url": "https://api.github.com/repos/square/okhttp/milestones/25",
      "html_url": "https://github.com/square/okhttp/milestone/25",
      "labels_url": "https://api.github.com/repos/square/okhttp/milestones/25/labels",
      "id": 2743829,
      "node_id": "MDk6TWlsZXN0b25lMjc0MzgyOQ==",
      "number": 25,
      "title": "Backlog",
      "description": "Triaged issues that haven’t yet been assigned a specific release.",
      "creator": {
        "login": "swankjesse",
        "id": 133019,
        "node_id": "MDQ6VXNlcjEzMzAxOQ==",
        "avatar_url": "https://avatars.githubusercontent.com/u/133019?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/swankjesse",
        "html_url": "https://github.com/swankjesse",
        "followers_url": "https://api.github.com/users/swankjesse/followers",
        "following_url": "https://api.github.com/users/swankjesse/following{/other_user}",
        "gists_url": "https://api.github.com/users/swankjesse/gists{/gist_id}",
        "starred_url": "https://api.github.com/users/swankjesse/starred{/owner}{/repo}",
        "subscriptions_url": "https://api.github.com/users/swankjesse/subscriptions",
        "organizations_url": "https://api.github.com/users/swankjesse/orgs",
        "repos_url": "https://api.github.com/users/swankjesse/repos",
        "events_url": "https://api.github.com/users/swankjesse/events{/privacy}",
        "received_events_url": "https://api.github.com/users/swankjesse/received_events",
        "type": "User",
        "site_admin": false
      },
      "open_issues": 50,
      "closed_issues": 99,
      "state": "open",
      "created_at": "2017-09-04T22:02:25Z",
      "updated_at": "2021-07-15T15:16:13Z",
      "due_on": null,
      "closed_at": null
    },
    "comments": 1,
    "created_at": "2021-03-04T06:46:38Z",
    "updated_at": "2021-03-06T16:13:11Z",
    "closed_at": null,
    "author_association": "COLLABORATOR",
    "active_lock_reason": null,
    "body": "https://umang91.medium.com/explicit-api-mode-kotlin-a527843d94f3\r\n\r\n> Kotlin compiler offers explicit API mode for library authors. In this mode, the compiler performs additional checks that help make the library’s API clearer and more consistent.",
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/square/okhttp/issues/6566",
    "repository_url": "https://api.github.com/repos/square/okhttp",
    "labels_url": "https://api.github.com/repos/square/okhttp/issues/6566/labels{/name}",
    "comments_url": "https://api.github.com/repos/square/okhttp/issues/6566/comments",
    "events_url": "https://api.github.com/repos/square/okhttp/issues/6566/events",
    "html_url": "https://github.com/square/okhttp/pull/6566",
    "id": 812974369,
    "node_id": "MDExOlB1bGxSZXF1ZXN0NTc3MTk3NjIy",
    "number": 6566,
    "title": "Improve OkHttp Docs",
    "user": {
      "login": "Andre601",
      "id": 11576465,
      "node_id": "MDQ6VXNlcjExNTc2NDY1",
      "avatar_url": "https://avatars.githubusercontent.com/u/11576465?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/Andre601",
      "html_url": "https://github.com/Andre601",
      "followers_url": "https://api.github.com/users/Andre601/followers",
      "following_url": "https://api.github.com/users/Andre601/following{/other_user}",
      "gists_url": "https://api.github.com/users/Andre601/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/Andre601/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/Andre601/subscriptions",
      "organizations_url": "https://api.github.com/users/Andre601/orgs",
      "repos_url": "https://api.github.com/users/Andre601/repos",
      "events_url": "https://api.github.com/users/Andre601/events{/privacy}",
      "received_events_url": "https://api.github.com/users/Andre601/received_events",
      "type": "User",
      "site_admin": false
    },
    "labels": [

    ],
    "state": "open",
    "locked": false,
    "assignee": null,
    "assignees": [

    ],
    "milestone": null,
    "comments": 12,
    "created_at": "2021-02-21T23:01:19Z",
    "updated_at": "2021-03-05T17:35:48Z",
    "closed_at": null,
    "author_association": "CONTRIBUTOR",
    "active_lock_reason": null,
    "pull_request": {
      "url": "https://api.github.com/repos/square/okhttp/pulls/6566",
      "html_url": "https://github.com/square/okhttp/pull/6566",
      "diff_url": "https://github.com/square/okhttp/pull/6566.diff",
      "patch_url": "https://github.com/square/okhttp/pull/6566.patch"
    },
    "body": "Updates the complete docs in an attempt to make them more readable and organized.\r\nThis should not cause conflicts with other programs/systems (i.e. Javadoc generation, but I won't guarantee this, so testing it first is highly recommendet.\r\n\r\nPlease see #6565 for full context and actual major changes.\r\n\r\ncloses #6565 ",
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/square/okhttp/issues/6565",
    "repository_url": "https://api.github.com/repos/square/okhttp",
    "labels_url": "https://api.github.com/repos/square/okhttp/issues/6565/labels{/name}",
    "comments_url": "https://api.github.com/repos/square/okhttp/issues/6565/comments",
    "events_url": "https://api.github.com/repos/square/okhttp/issues/6565/events",
    "html_url": "https://github.com/square/okhttp/issues/6565",
    "id": 812922863,
    "node_id": "MDU6SXNzdWU4MTI5MjI4NjM=",
    "number": 6565,
    "title": "[Proposal] Improve OkHttp Documentation",
    "user": {
      "login": "Andre601",
      "id": 11576465,
      "node_id": "MDQ6VXNlcjExNTc2NDY1",
      "avatar_url": "https://avatars.githubusercontent.com/u/11576465?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/Andre601",
      "html_url": "https://github.com/Andre601",
      "followers_url": "https://api.github.com/users/Andre601/followers",
      "following_url": "https://api.github.com/users/Andre601/following{/other_user}",
      "gists_url": "https://api.github.com/users/Andre601/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/Andre601/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/Andre601/subscriptions",
      "organizations_url": "https://api.github.com/users/Andre601/orgs",
      "repos_url": "https://api.github.com/users/Andre601/repos",
      "events_url": "https://api.github.com/users/Andre601/events{/privacy}",
      "received_events_url": "https://api.github.com/users/Andre601/received_events",
      "type": "User",
      "site_admin": false
    },
    "labels": [
      {
        "id": 9998867,
        "node_id": "MDU6TGFiZWw5OTk4ODY3",
        "url": "https://api.github.com/repos/square/okhttp/labels/enhancement",
        "name": "enhancement",
        "color": "84b6eb",
        "default": true,
        "description": "Feature not a bug"
      }
    ],
    "state": "open",
    "locked": false,
    "assignee": null,
    "assignees": [

    ],
    "milestone": null,
    "comments": 1,
    "created_at": "2021-02-21T18:49:56Z",
    "updated_at": "2021-02-22T16:43:32Z",
    "closed_at": null,
    "author_association": "CONTRIBUTOR",
    "active_lock_reason": null,
    "body": "This issue serves as a first step in proposing changes to the OkHttp Documentation found under https://square.github.io/okhttp\r\n\r\n## The reasons\r\nWhile the docs do look nice do they miss out on a lot of different features that are provided by the 'Material for MkDocs' Theme (Which I call just 'Material' throughout this issue for simplicity reasons) and PyMdown Extensions (Also known as Pymdownx).\r\n\r\n## Changes\r\nI propose the following main changes to the documentation.\r\n\r\n### Dark theme\r\nMaterial offers a simple setting for using dark theme called slate:\r\n```yaml\r\ntheme:\r\n  palette:\r\n    scheme: slate\r\n```\r\n\r\nAnd let's be honest: This bright theme is not good for the eyes to look at and a dark theme would be a lot better to use.\r\n\r\nNote, that the dark theme was addes in a later 5.x version of Material, so upgrading should be recommended.\r\n\r\n### Using tabs\r\nMaterial offers the usage of tabs.\r\nThis allows you to keep pages organized in tabs, which are visible at the top of the page.\r\n\r\nAdding it only requires this in the mkdocs.yml\r\n```yaml\r\ntheme:\r\n  features:\r\n  - navigation.tabs\r\n```\r\n\r\nAs mentioned allows this to group pages together under a single name, which makes it look better in comparison to just having all pages listed on the side.\r\n\r\nAs an example can you group and add the `changelog_3x.md`, `changelog_2x.md`, `changelog_1x.md` and `changelog.md` under the `Change Log` section like this:\r\n\r\n```yaml\r\nnav:\r\n# ...\r\n- 'Change Logs': # I suggest renaming this to Change Logs\r\n  - 'Latest': changelog.md\r\n  - 'Version 3.x': changelog_3x.md\r\n  - 'Version 2.x': changelog_2x.md\r\n  - 'Version 1.x': changelog_1x.md\r\n```\r\n\r\n### General reordering of pages\r\nNext proposal is to reorder and group pages together into their own separate sections.\r\nYou already have `4.x` as a separate group, which considering all other pages being separated seems somewhat odd and inconsistent.\r\n\r\nI propose the following Folder structure to use:\r\n```\r\ndocs/\r\n  │\r\n  ├─ 4.x/\r\n  │  ├─ mockwebserver/\r\n  │  │  └─ okhttp3.mockwebserver/\r\n  │  │     └─ index.md\r\n  │  ├─ okhttp/\r\n  │  │  └─ okhttp3/\r\n  │  │     └─ index.md\r\n  │  ├─ okhttp-brotli/\r\n  │  │  └─ okhttp3.brotli/\r\n  │  │     └─ index.md\r\n  │  ├─ okhttp-dnsoverhttps/\r\n  │  │  └─ okhttp3.dnsoverhttps/\r\n  │  │     └─ index.md\r\n  │  ├─ okhttp-logging-interceptor/\r\n  │  │  └─ okhttp3.logging/\r\n  │  │     └─ index.md\r\n  │  ├─ okhttp-sse/\r\n  │  │  └─ okhttp3.sse/\r\n  │  │     └─ index.md\r\n  │  ├─ okhttp-tls/\r\n  │  │  └─ okhttp3.tls/\r\n  │  │     └─ index.md\r\n  │  ├─ okhttp-urlconnection/\r\n  │  │  └─ okhttp3/\r\n  │  │     └─ index.md\r\n  │  └─ upgrading_to_okhttp_4.md\r\n  ├─ changelogs/\r\n  │  ├─ changelog.md\r\n  │  ├─ changelog_3x.md\r\n  │  ├─ changelog_2x.md\r\n  │  ├─ changelog_1.md\r\n  │  └─ tls_configuration_history.md\r\n  ├─ contribute/\r\n  │  ├─ code_of_conduct.md\r\n  │  └─ contributing.md\r\n  ├─ features/\r\n  │  ├─ caching.md\r\n  │  ├─ calls.md\r\n  │  ├─ concurrency.md\r\n  │  ├─ connections.md\r\n  │  ├─ debug_logging.md\r\n  │  ├─ events.md\r\n  │  ├─ https.md\r\n  │  ├─ inteceptors.md\r\n  │  └─ r8_proguard.md\r\n  ├─ security/\r\n  │  ├─ security.md\r\n  │  └─ security_providers.md\r\n  ├─ index.md\r\n  ├─ recipes.md\r\n  ├─ releasing.md\r\n  └─ works_with_okhttp.md\r\n```\r\n\r\nThe benefits of such a structure would be a more organized look and feel.\r\nNote that this folder structure would also be mostly mirrored in the navigation as follows:\r\n```yaml\r\nnav:\r\nnav:\r\n  - 'Overview':\r\n    - 'Introduction': index.md\r\n    - 'Stack Overflow ⏏': https://stackoverflow.com/questions/tagged/okhttp?sort=active\r\n  - 'Features':\r\n    - 'Caching': features/caching.md\r\n    - 'Calls': features/calls.md\r\n    - 'Concurrency': features/concurrency.md\r\n    - 'Connections': features/connections.md\r\n    - 'Debug Logging': features/debug_logging.md\r\n    - 'Events': features/events.md\r\n    - 'HTTPS': features/https.md\r\n    - 'Interceptors': features/interceptors.md\r\n    - 'R8 / ProGuard': features/r8_proguard.md\r\n  - 'Recipes': recipes.md\r\n  - 'Security':\r\n    - 'Security Policy': security/security.md\r\n    - 'Security Providers': security/security_providers.md\r\n  - 'Works with OkHttp': works_with_okhttp.md\r\n  - '4.x API':\r\n    - 'Upgrading to OkHttp 4': 4.x/upgrading_to_okhttp_4.md\r\n    - 'okhttp': 4.x/okhttp/okhttp3/index.md\r\n    - 'brotli': 4.x/okhttp-brotli/okhttp3.brotli/index.md\r\n    - 'dnsoverhttps': 4.x/okhttp-dnsoverhttps/okhttp3.dnsoverhttps/index.md\r\n    - 'logging-interceptor': 4.x/okhttp-logging-interceptor/okhttp3.logging/index.md\r\n    - 'sse': 4.x/okhttp-sse/okhttp3.sse/index.md\r\n    - 'tls': 4.x/okhttp-tls/okhttp3.tls/index.md\r\n    - 'urlconnection': 4.x/okhttp-urlconnection/okhttp3/index.md\r\n    - 'mockwebserver': 4.x/mockwebserver/okhttp3.mockwebserver/index.md\r\n  - '3.12.x API':\r\n    - 'okhttp ⏏': https://square.github.io/okhttp/3.x/okhttp/\r\n    - 'dnsoverhttps ⏏': https://square.github.io/okhttp/3.x/okhttp-dnsoverhttps/\r\n    - 'logging-interceptor ⏏': https://square.github.io/okhttp/3.x/logging-interceptor/\r\n    - 'sse ⏏': https://square.github.io/okhttp/3.x/okhttp-sse/\r\n    - 'tls ⏏': https://square.github.io/okhttp/3.x/okhttp-tls/\r\n    - 'urlconnection ⏏': https://square.github.io/okhttp/3.x/okhttp-urlconnection/\r\n    - 'mockwebserver ⏏': https://square.github.io/okhttp/3.x/mockwebserver/\r\n  - 'Change Logs':\r\n    - 'Latest': changelogs/changelog.md\r\n    - 'Version 3.x': changelogs/changelog_3x.md\r\n    - 'Version 2.x': changelogs/changelog_2x.md\r\n    - 'Version 1.x': changelogs/changelog_1x.md\r\n    - 'TLS History': changelogs/tls_configuration_history.md\r\n  - 'Contributing':\r\n    - 'Contribute': contribute/contributing.md\r\n    - 'Code of Conduct': contribute/code_of_conduct.md\r\n```\r\n\r\n## Usage of other pymdownx extensions\r\nI believe using the Emojis extension of pymdownx together with the MaterialX emoji option, which is part of Material and enables the usage of SVG icons from Fontawesome, Material Design and Octicons, would be beneficial for the documentation.\r\n\r\nRight now is the main benefit/feature I imagined, which is displaying something like Fontawesome's `external-link-alt` icon in the navigation tree on the left, not supported.\r\n\r\n~~I [opened an issue](https://github.com/squidfunk/mkdocs-material/issues/2318) on Material proposing such a change, as it would look better to use such an icon to indicate external pages, rather than using ⏏.~~\r\nUnfortunately is this not doable for extensions and themes.\r\n\r\nBut perhaps there would also be other places where the usage of either emojis or icons could be beneficial to use.\r\n\r\n## Live Preview\r\nAll the changes I discussed above can be found on a live-preview I made over here: https://andre601.ch/okhttp\r\n\r\n## Notes\r\nI used the following things for this:\r\n- MkDocs 1.1\r\n- Material for MkDocs 6.2.8\r\n- pymdown-extensions 7.x\r\n- mkdocs-redirects 1.0.1\r\n\r\nI used `pip install -U mkdocs-material` to upgrade Material and all its dependencies and `pip install mkdocs-redirects` to download the redirects plugin used.\r\n\r\nAnother note:\r\nWith exception of a placeholder index file for the main page do some other pages not exist due to the nature of OkHttp's Documentation structure.",
    "performed_via_github_app": null
  },
  {
    "url": "https://api.github.com/repos/square/okhttp/issues/6539",
    "repository_url": "https://api.github.com/repos/square/okhttp",
    "labels_url": "https://api.github.com/repos/square/okhttp/issues/6539/labels{/name}",
    "comments_url": "https://api.github.com/repos/square/okhttp/issues/6539/comments",
    "events_url": "https://api.github.com/repos/square/okhttp/issues/6539/events",
    "html_url": "https://github.com/square/okhttp/issues/6539",
    "id": 799641130,
    "node_id": "MDU6SXNzdWU3OTk2NDExMzA=",
    "number": 6539,
    "title": "Encrypted SNI or ClientHello",
    "user": {
      "login": "yschimke",
      "id": 231923,
      "node_id": "MDQ6VXNlcjIzMTkyMw==",
      "avatar_url": "https://avatars.githubusercontent.com/u/231923?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/yschimke",
      "html_url": "https://github.com/yschimke",
      "followers_url": "https://api.github.com/users/yschimke/followers",
      "following_url": "https://api.github.com/users/yschimke/following{/other_user}",
      "gists_url": "https://api.github.com/users/yschimke/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/yschimke/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/yschimke/subscriptions",
      "organizations_url": "https://api.github.com/users/yschimke/orgs",
      "repos_url": "https://api.github.com/users/yschimke/repos",
      "events_url": "https://api.github.com/users/yschimke/events{/privacy}",
      "received_events_url": "https://api.github.com/users/yschimke/received_events",
      "type": "User",
      "site_admin": false
    },
    "labels": [
      {
        "id": 9998867,
        "node_id": "MDU6TGFiZWw5OTk4ODY3",
        "url": "https://api.github.com/repos/square/okhttp/labels/enhancement",
        "name": "enhancement",
        "color": "84b6eb",
        "default": true,
        "description": "Feature not a bug"
      }
    ],
    "state": "open",
    "locked": false,
    "assignee": null,
    "assignees": [

    ],
    "milestone": null,
    "comments": 7,
    "created_at": "2021-02-02T20:10:46Z",
    "updated_at": "2021-05-11T06:52:32Z",
    "closed_at": null,
    "author_association": "COLLABORATOR",
    "active_lock_reason": null,
    "body": "tracking bug\r\n\r\nBoring SSL - https://bugs.chromium.org/p/boringssl/issues/detail?id=275\r\n\r\nConscrypt - https://github.com/google/conscrypt/issues/730\r\n\r\nReference from Tunnel Bear to contributions to enable for OkHttp (seems blocked)\r\nhttps://www.tunnelbear.com/blog/tunnelbear-implements-encrypted-sni/\r\nhttps://boringssl-review.googlesource.com/c/boringssl/+/42644\r\n\r\nNow ECH - https://blog.cloudflare.com/encrypted-client-hello/\r\n",
    "performed_via_github_app": null
  }
]